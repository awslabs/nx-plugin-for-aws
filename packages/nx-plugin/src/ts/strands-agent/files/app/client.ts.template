import { AppRouter } from './router.js';
import { AgentCoreTrpcClient, WebSocketTrpcClient } from './agent-core-trpc-client.js';

/**
 * Client for connecting to <%- agentNameClassName %> on Bedrock AgentCore Runtime via WebSocket from a NodeJS environment
 *
 * Refer to the Nx Plugin for AWS documentation for instructions to connect to this agent in a browser.
 */
export class <%- agentNameClassName %>Client {
  /**
   * Creates a tRPC client with IAM authentication using AWS credentials.
   *
   * The WebSocket connection is authenticated using AWS Signature Version 4 (SigV4)
   */
  public static withIamAuth = AgentCoreTrpcClient.withIamAuth<AppRouter>;

  /**
   * Creates a tRPC client with JWT (JSON Web Token) authentication.
   *
   * The WebSocket connection includes the JWT as a Bearer token in the Authorization header.
   */
  public static withJwtAuth = AgentCoreTrpcClient.withJwtAuth<AppRouter>;

  /**
   * Creates a tRPC client for use with a locally running <%- agentNameClassName %>.
   */
  public static local = WebSocketTrpcClient.create<AppRouter>;
}
