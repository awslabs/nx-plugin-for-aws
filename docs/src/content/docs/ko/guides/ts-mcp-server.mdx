---
title: "타입스크립트 MCP 서버"
description: "대규모 언어 모델에 컨텍스트를 제공하기 위한 타입스크립트 모델 컨텍스트 프로토콜(MCP) 서버 생성"
---



import { FileTree } from '@astrojs/starlight/components';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import Link from '@components/link.astro';
import Snippet from '@components/snippet.astro';
import GeneratorParameters from '@components/generator-parameters.astro';

대형 언어 모델(LLM)에 컨텍스트를 제공하기 위한 TypeScript [모델 컨텍스트 프로토콜(MCP)](https://modelcontextprotocol.io/) 서버를 생성하고, 선택적으로 [Amazon Bedrock AgentCore](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/)에 배포합니다.

## MCP란?

[모델 컨텍스트 프로토콜(MCP)](https://modelcontextprotocol.io/)은 AI 어시스턴트가 외부 도구 및 리소스와 상호작용할 수 있도록 하는 개방형 표준입니다. LLM이 다음을 수행할 수 있는 일관된 방법을 제공합니다:

- 작업 수행 또는 정보 검색을 위한 도구(함수) 실행
- 컨텍스트 또는 데이터 제공을 위한 리소스 접근

## 사용 방법

### MCP 서버 생성

TypeScript MCP 서버를 두 가지 방법으로 생성할 수 있습니다:

<RunGenerator generator="ts#mcp-server" />

:::tip
먼저 MCP 서버를 추가할 프로젝트를 생성하기 위해 <Link path="/guides/typescript-project">`ts#project`</Link> 생성기를 사용하세요.
:::

### 옵션

<GeneratorParameters generator="ts#mcp-server" />

## 생성기 출력

생성기는 기존 TypeScript 프로젝트에 다음 파일들을 추가합니다:

<FileTree>
  - your-project/
    - src/
      - mcp-server/ (사용자 지정 이름 지정 가능)
        - index.ts 서버를 내보냄
        - server.ts 주요 서버 정의
        - stdio.ts STDIO 전송을 위한 진입점 (단순 로컬 MCP 서버에 유용)
        - http.ts Streamable HTTP 전송을 위한 진입점 (MCP 서버 호스팅에 유용)
        - tools/
          - add.ts 샘플 도구
        - resources/
          - sample-guidance.ts 샘플 리소스
        - Dockerfile MCP 서버 실행을 위한 진입점 (`computeType`이 `None`으로 설정된 경우 제외)
    - package.json bin 항목 및 MCP 종속성 업데이트
    - project.json MCP 서버 실행 타겟 업데이트
</FileTree>

### 인프라

:::note
`computeType`을 `None`으로 선택한 경우 생성기는 인프라 코드를 생성하지 않습니다.
:::

<Snippet name="shared-constructs" />

<Snippet name="mcp/shared-constructs" />

## MCP 서버 작업

### 도구 추가

도구는 AI 어시스턴트가 호출할 수 있는 함수입니다. `server.ts` 파일에 새 도구를 추가할 수 있습니다:

```typescript
server.tool("toolName", "tool description",
  { param1: z.string(), param2: z.number() }, // Zod를 사용한 입력 스키마
  async ({ param1, param2 }) => {
    // 도구 구현
    return {
      content: [{ type: "text", text: "Result" }]
    };
  }
);
```

:::caution
현재 MCP SDK는 Zod v3만 지원합니다. 다른 생성기에서 Zod v4 사용을 허용하기 위해 Zod v3 종속성이 `zod-v3`로 설치됩니다. MCP 도구 스키마에서는 다음과 같이 Zod를 임포트해야 합니다:

```ts
import { z } from 'zod-v3';
```

[MCP SDK의 이슈](https://github.com/modelcontextprotocol/typescript-sdk/issues/164)가 해결되면 추가 `zod-v3` 종속성을 제거하고 `zod`에서 임포트할 수 있습니다.
:::

### 리소스 추가

리소스는 AI 어시스턴트에 컨텍스트를 제공합니다. 파일에서 정적 리소스를 추가하거나 동적 리소스를 생성할 수 있습니다:

```typescript
const exampleContext = '반환할 컨텍스트 내용';

server.resource('resource-name', 'example://resource', async (uri) => ({
  contents: [{ uri: uri.href, text: exampleContext }],
}));

// 동적 리소스
server.resource('dynamic-resource', 'dynamic://resource', async (uri) => {
  const data = await fetchSomeData();
  return {
    contents: [{ uri: uri.href, text: data }],
  };
});
```

## AI 어시스턴트와 연동 설정

<Snippet name="mcp/configuration-ts" parentHeading="AI 어시스턴트와 연동 설정" />

## MCP 서버 실행

### 인스펙터

생성기는 `<your-server-name>-inspect` 타겟을 구성하며, 이는 STDIO 전송을 사용해 MCP 서버에 연결하도록 설정된 [MCP 인스펙터](https://github.com/modelcontextprotocol/inspector)를 시작합니다.

<NxCommands commands={['run your-project:your-server-name-inspect']} />

이 명령은 `http://localhost:6274`에서 인스펙터를 시작합니다. "Connect" 버튼을 클릭하여 시작하세요.

### STDIO

MCP 서버를 테스트하고 사용하는 가장 쉬운 방법은 인스펙터를 사용하거나 AI 어시스턴트와 연동하는 것입니다(STDIO 전송 사용).

[STDIO 전송](https://modelcontextprotocol.io/docs/concepts/transports#standard-input%2Foutput-stdio)을 직접 사용해 `<your-server-name>-serve-stdio` 타겟으로 서버를 실행할 수도 있습니다.

<NxCommands commands={['run your-project:your-server-name-serve-stdio']} />

이 명령은 파일 변경 시 서버를 자동 재시작하는 `tsx --watch`를 사용합니다.

### Streamable HTTP

[Streamable HTTP 전송](https://modelcontextprotocol.io/docs/concepts/transports#streamable-http)으로 로컬에서 MCP 서버를 실행하려면 `<your-server-name>-serve-http` 타겟을 사용하세요.

<NxCommands commands={['run your-project:your-server-name-serve-http']} />

이 명령은 파일 변경 시 서버를 자동 재시작하는 `tsx --watch`를 사용합니다.

## Bedrock AgentCore 런타임에 MCP 서버 배포

<Snippet name="mcp/bedrock-deployment" parentHeading="Bedrock AgentCore 런타임에 MCP 서버 배포" />

### 번들 타겟

Bedrock AgentCore 런타임용 MCP 서버를 빌드하기 위해 `<your-mcp-server>-bundle` 타겟이 프로젝트에 추가됩니다. 이 타겟은:

- [`esbuild`](https://esbuild.github.io/)을 사용해 MCP 서버를 단일 JavaScript 파일로 번들링합니다(Streamable HTTP MCP 서버용 진입점으로 `http.ts` 사용).
- [MCP 프로토콜 계약](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/runtime-service-contract.html#mcp-protocol-contract)에 따라 포트 `8000`에서 이 번들 서버를 실행하는 `Dockerfile`에서 도커 이미지를 빌드합니다.

:::tip
도커 이미지는 태그(예: `my-scope-my-project-mcp-server:latest`)로 빌드되며, CDK 구성의 `Dockerfile`이 이를 상속받아 MCP 서버 프로젝트와 동일 위치에 배치할 수 있습니다.
:::

### 관측 가능성

<Snippet name="mcp/observability" parentHeading="관측 가능성" />