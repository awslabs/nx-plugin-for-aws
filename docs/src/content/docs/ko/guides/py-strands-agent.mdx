---
title: "파이썬 스트랜드 에이전트"
description: "도구를 사용하여 AI 에이전트를 구축하고 Amazon Bedrock AgentCore 런타임에 배포하기 위한 파이썬 스트랜드 에이전트 생성"
---



import { FileTree } from '@astrojs/starlight/components';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import Link from '@components/link.astro';
import Snippet from '@components/snippet.astro';
import GeneratorParameters from '@components/generator-parameters.astro';

도구를 사용하여 AI 에이전트를 구축하고 [Amazon Bedrock AgentCore 런타임](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/)에 선택적으로 배포할 수 있는 Python [Strands Agent](https://strandsagents.com/)를 생성하세요.

## Strands란?

[Strands](https://strandsagents.com/latest/documentation/docs/)는 AI 에이전트 구축을 위한 가볍고 프로덕션 환경에 적합한 Python 프레임워크입니다. 주요 기능:

- **가볍고 사용자 정의 가능**: 간결한 에이전트 루프로 개발자 방해 최소화
- **프로덕션 환경 준비 완료**: 완전한 관측 가능성, 추적 기능 및 확장을 위한 배포 옵션
- **모델 및 제공자에 구애받지 않음**: 다양한 제공자의 여러 모델 지원
- **커뮤니티 주도 도구**: 강력한 커뮤니티 제공 도구 세트
- **다중 에이전트 지원**: 에이전트 팀, 자율 에이전트 같은 고급 기법
- **유연한 상호작용 모드**: 대화형, 스트리밍 및 비스트리밍 지원

## 사용 방법

### Strands 에이전트 생성

두 가지 방법으로 Python Strands 에이전트를 생성할 수 있습니다:

<RunGenerator generator="py#strands-agent" />

:::tip
먼저 Strands 에이전트를 추가할 프로젝트를 생성하려면 <Link path="/guides/python-project">`py#project`</Link> 생성기를 사용하세요.
:::

### 옵션

<GeneratorParameters generator="py#strands-agent" />

## 생성기 출력

생성기는 기존 Python 프로젝트에 다음 파일들을 추가합니다:

<FileTree>
  - your-project/
    - your_module/
      - agent/ (사용자 지정 이름 지정 시 변경)
        - \_\_init\_\_.py Python 패키지 초기화
        - agent.py 샘플 도구가 포함된 주요 에이전트 정의
        - main.py Bedrock AgentCore 런타임용 진입점
        - agentcore_mcp_client.py Bedrock AgentCore 런타임에서 호스팅되는 MCP 서버 호출에 유용한 클라이언트 팩토리
        - Dockerfile 에이전트 호스팅용 진입점 (`computeType`이 `None`으로 설정된 경우 제외)
    - pyproject.toml Strands 종속성으로 업데이트
    - project.json 에이전트 서빙 타겟으로 업데이트
</FileTree>

:::note
`computeType`을 `None`으로 선택하지 않은 경우, 생성기는 Strands 에이전트 배포를 위한 CDK 구문도 함께 생성합니다.
:::

## Strands 에이전트 작업

### 도구 추가

도구는 AI 에이전트가 작업 수행을 위해 호출할 수 있는 함수입니다. Strands 프레임워크는 데코레이터 기반의 간단한 접근 방식을 사용합니다.

[`agent.py`](packages/nx-plugin/src/py/strands-agent/files/agent.py.template:6) 파일에 새 도구를 추가할 수 있습니다:

```python
from strands import Agent, tool

@tool
def calculate_sum(numbers: list[int]) -> int:
    """숫자 리스트의 합계 계산"""
    return sum(numbers)

@tool
def get_weather(city: str) -> str:
    """도시의 날씨 정보 조회"""
    # 여기에 날씨 API 통합 코드를 추가하세요
    return f"{city} 날씨: 맑음, 25°C"

# 에이전트에 도구 추가
agent = Agent(
    system_prompt="다양한 도구를 사용할 수 있는 유용한 어시스턴트입니다.",
    tools=[calculate_sum, get_weather],
)
```

Strands 프레임워크가 자동으로 처리하는 사항:
- 함수 타입 힌트 기반 타입 검증
- 도구 호출을 위한 JSON 스키마 생성
- 오류 처리 및 응답 포맷팅

### 사전 제작 도구 사용

Strands는 `strands-tools` 패키지를 통해 사전 제작된 도구 컬렉션을 제공합니다:

```python
from strands_tools import current_time, http_request, file_read

agent = Agent(
    system_prompt="유용한 어시스턴트입니다.",
    tools=[current_time, http_request, file_read],
)
```

### 모델 구성

기본적으로 Strands 에이전트는 Claude 4 Sonnet을 사용하지만 모델 제공자를 사용자 정의할 수 있습니다. 구성 옵션은 [Strands 모델 제공자 문서](https://strandsagents.com/latest/documentation/docs/user-guide/quickstart/#model-providers) 참조:

```python
from strands import Agent
from strands.models import BedrockModel

# BedrockModel 생성
bedrock_model = BedrockModel(
    model_id="anthropic.claude-sonnet-4-20250514-v1:0",
    region_name="us-west-2",
    temperature=0.3,
)

agent = Agent(model=bedrock_model)
```

### MCP 서버 사용

Strands 에이전트에 [MCP 서버의 도구를 추가](https://strandsagents.com/latest/documentation/docs/user-guide/concepts/tools/mcp-tools/)할 수 있습니다.

<Link path="/guides/py-mcp-server">`py#mcp-server`</Link> 또는 <Link path="/guides/ts-mcp-server">`ts#mcp-server`</Link> 생성기로 생성한 MCP 서버(또는 Bedrock AgentCore 런타임에서 호스팅되는 기타 서버)를 사용하려면 `agentcore_mcp_client.py`에 클라이언트 팩토리가 생성됩니다.

`agent.py`의 `get_agent` 메서드를 업데이트하여 MCP 클라이언트를 생성하고 도구를 추가할 수 있습니다. 다음은 IAM(SigV4) 인증을 사용하는 예시입니다:

```python
# agent.py
import os
from contextlib import contextmanager

import boto3
from strands import Agent

from .agentcore_mcp_client import AgentCoreMCPClient

# 리전 및 자격 증명 획득
region = os.environ["AWS_REGION"]
boto_session = boto3.Session(region_name=region)
credentials = boto_session.get_credentials()

@contextmanager
def get_agent(session_id: str):
    mcp_client = AgentCoreMCPClient.with_iam_auth(
        agent_runtime_arn=os.environ["MCP_AGENTCORE_RUNTIME_ARN"],
        credentials=credentials,
        region=region,
        session_id=session_id,
    )

    with mcp_client:
        mcp_tools = mcp_client.list_tools_sync()

        yield Agent(
            system_prompt="..."
            tools=[*mcp_tools],
        )
```

:::tip
대상 MCP 서버가 JWT 인증을 사용하는 경우, 대신 `AgentCoreMCPClient.with_jwt_auth` 메서드를 사용할 수 있습니다.
:::

위 IAM 인증 예제를 사용하려면 CDK 인프라에서 두 가지를 구성해야 합니다. 첫째, MCP 서버의 AgentCore 런타임 ARN을 위한 환경 변수를 추가하고, 둘째 에이전트에 MCP 서버 호출 권한을 부여해야 합니다. 이는 다음과 같이 구현할 수 있습니다:

```ts {9, 13}
import { MyProjectAgent, MyProjectMcpServer } from ':my-scope/common-constructs';

export class ExampleStack extends Stack {
  constructor(scope: Construct, id: string) {
    const mcpServer = new MyProjectMcpServer(this, 'MyProjectMcpServer');

    const agent = new MyProjectAgent(this, 'MyProjectAgent', {
      environment: {
        MCP_AGENTCORE_RUNTIME_ARN: mcpServer.agentCoreRuntime.arn,
      },
    });

    mcpServer.agentCoreRuntime.grantInvoke(agent.agentCoreRuntime);
  }
}
```

### 추가 정보

Strands 에이전트 작성에 대한 심층 가이드는 [Strands 문서](https://strandsagents.com/latest/documentation/docs/)를 참조하세요.

## Bedrock AgentCore Python SDK

생성기는 AgentCore에서 에이전트가 구현해야 하는 기본 HTTP 계약을 관리하기 위해 [Bedrock AgentCore Python SDK](https://github.com/aws/bedrock-agentcore-sdk-python)를 구성합니다.

SDK 기능에 대한 자세한 내용은 [공식 문서](https://aws.github.io/bedrock-agentcore-starter-toolkit/user-guide/runtime/quickstart.html)에서 확인할 수 있습니다.

:::note
생성기가 에이전트 배포를 관리하는 CDK 구문을 제공하므로 문서에 언급된 `bedrock-agentcore-starter-toolkit`을 사용할 필요가 없습니다.
:::

## Strands 에이전트 실행

### 로컬 개발

생성기는 `<your-agent-name>-serve`라는 타겟을 구성하여 개발 및 테스트를 위해 Strands 에이전트를 로컬에서 시작합니다.

<NxCommands commands={['run your-project:agent-serve']} />

이 명령은 [Bedrock AgentCore Python SDK](https://github.com/aws/bedrock-agentcore-sdk-python)를 사용하여 Strands 에이전트를 실행하기 위해 `uv run`을 사용합니다.

## Bedrock AgentCore 런타임에 Strands 에이전트 배포

### CDK 구문

`computeType`으로 `BedrockAgentCoreRuntime`을 선택한 경우 [Amazon Bedrock AgentCore 런타임](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/agents-tools-runtime.html)에 Strands 에이전트를 배포하는 데 사용할 수 있는 CDK 구문이 생성됩니다.

CDK 구문 이름은 생성기 실행 시 선택한 `name` 또는 기본값인 `<ProjectName>Agent`를 기반으로 합니다.

CDK 애플리케이션에서 이 CDK 구문을 사용할 수 있습니다:

```ts {6}
import { MyProjectAgent } from ':my-scope/common-constructs';

export class ExampleStack extends Stack {
  constructor(scope: Construct, id: string) {
    // 스택에 에이전트 추가
    const agent = new MyProjectAgent(this, 'MyProjectAgent');

    // Bedrock 관련 모델 호출 권한 부여
    agent.agentCoreRuntime.role.addToPolicy(
      new PolicyStatement({
        actions: [
          'bedrock:InvokeModel',
          'bedrock:InvokeModelWithResponseStream',
        ],
        // 사용하는 특정 모델로 범위 축소 가능
        resources: ['arn:aws:bedrock:*::foundation-model/*'],
      }),
    );
  }
}
```

:::note
Bedrock AgentCore 런타임에 배포할 때 AWS 계정에서 적절한 파운데이션 모델이 활성화되어 있어야 합니다. 기본적으로 Strands 에이전트는 Claude 4 Sonnet을 사용하지만 위에서 설명한 대로 사용자 정의할 수 있습니다.

Amazon Bedrock에서 모델 액세스를 활성화하려면 [공식 가이드](https://docs.aws.amazon.com/bedrock/latest/userguide/model-access-modify.html)를 따르세요.
:::

:::caution
Strands 에이전트 빌드 및 배포에는 [Docker](https://www.docker.com/)가 필요합니다. 다음과 같은 오류를 방지하려면 Docker가 설치되어 실행 중인지 확인하세요:

```
ERROR: Cannot connect to the Docker daemon at unix://path/to/docker.sock.
```
:::

### 번들 및 Docker 타겟

Bedrock AgentCore 런타임용 Strands 에이전트 빌드를 위해 프로젝트에 `bundle` 타겟이 추가됩니다. 이 타겟은:

- `uv export`를 사용하여 Python 종속성을 `requirements.txt` 파일로 내보냄
- `uv pip install`로 대상 플랫폼(`aarch64-manylinux2014`)에 대한 종속성 설치

또한 Strands 에이전트 전용 `docker` 타겟이 추가되어:
- [AgentCore 런타임 계약](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/runtime-service-contract.html)에 따라 에이전트를 실행하는 `Dockerfile`에서 도커 이미지 빌드

:::tip
도커 이미지는 `my-scope-my-project-agent:latest`와 같은 태그로 빌드되며, CDK 구문의 `Dockerfile`이 이를 상속받아 Strands 에이전트 프로젝트와 함께 배치될 수 있습니다.
:::

### 인증

#### IAM

기본적으로 Strands 에이전트는 IAM 인증으로 보호되며, 인수 없이 배포할 수 있습니다:

```ts {5}
import { MyProjectAgent } from ':my-scope/common-constructs';

export class ExampleStack extends Stack {
  constructor(scope: Construct, id: string) {
    new MyProjectAgent(this, 'MyProjectAgent');
  }
}
```

`grantInvoke` 메서드를 사용하여 Bedrock AgentCore 런타임에서 에이전트 호출 권한을 부여할 수 있습니다. 예시:

```ts {8}
import { MyProjectAgent } from ':my-scope/common-constructs';

export class ExampleStack extends Stack {
  constructor(scope: Construct, id: string) {
    const agent = new MyProjectAgent(this, 'MyProjectAgent');
    const lambdaFunction = new Function(this, ...);

    agent.agentCoreRuntime.grantInvoke(lambdaFunction);
  }
}
```

#### Cognito JWT 인증

JWT 인증을 구성하려면 에이전트 구문에 `authorizerConfiguration` 속성을 전달할 수 있습니다. 다음은 Cognito 사용자 풀과 클라이언트를 구성하여 에이전트를 보호하는 예시입니다:

```ts {13-18}
import { MyProjectAgent } from ':my-scope/common-constructs';

export class ExampleStack extends Stack {
  constructor(scope: Construct, id: string) {
    const userPool = new UserPool(this, 'UserPool');
    const client = userPool.addClient('Client', {
      authFlows: {
        userPassword: true,
      },
    });

    new MyProjectAgent(this, 'MyProjectAgent', {
      authorizerConfiguration: {
        customJWTAuthorizer: {
          discoveryUrl: `https://cognito-idp.${Stack.of(userPool).region}.amazonaws.com/${userPool.userPoolId}/.well-known/openid-configuration`,
          allowedClients: [client.userPoolClientId],
        },
      },
    });
  }
}
```

### 관측 가능성

에이전트는 `Dockerfile`에 자동 계측을 구성하여 [AWS Distro for Open Telemetry](https://aws.amazon.com/otel/)(ADOT)를 사용한 관측 가능성이 자동으로 설정됩니다.

트레이스는 CloudWatch AWS 콘솔에서 "GenAI Observability"를 선택하여 확인할 수 있습니다. 트레이스가 표시되려면 [트랜잭션 검색](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Transaction-Search.html)을 활성화해야 합니다.

자세한 내용은 [AgentCore 관측 가능성 문서](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/observability-configure.html)를 참조하세요.