---
title: "CORS 구성 Terraform"
---

import Link from '@components/link.astro';

:::note
솔루션에 Terraform 웹사이트 모듈이 포함되어 있다면 CloudFront 도메인 이름을 사용하여 CORS를 제한할 수 있습니다.
CloudFront 도메인 이름 `<domain_name>`이 주어졌을 때, API 배포를 위한 Terraform 모듈 내에 다음을 추가하세요
- HTTP API의 경우 `cors_allow_origins` 속성을 `["http://localhost:4200", "http://localhost:4300", "https://<domain name>"]`로 설정합니다. 이는 API 게이트웨이 CORS를 이 배포와 로컬 호스트로 제한합니다.
- REST API의 경우 `ALLOWED_ORIGINS` 환경 변수를 `"https://<domain_name>"`로 설정합니다. 이는 AWS Lambda 통합에서 CloudFront 배포를 유일하게 허용된 CORS 원본(로컬 호스트 제외)으로 설정합니다. 이 제한은 사전 확인(preflight) OPTIONS에는 적용되지 않습니다 - 이 문제 해결의 우선순위를 높이는 데 도움이 되도록 [이 GitHub 이슈](https://github.com/awslabs/nx-plugin-for-aws/issues/377)에 +1을 눌러주세요.

```hcl {4,7}
module "my_api" {
  source = "../../common/terraform/src/app/apis/my-api"

  cors_allow_origins = ["http://localhost:4200", "http://localhost:4300", "https://<domain name>"] // Only required for HTTP API

  env = {
    ALLOWED_ORIGINS = "https://<domain name>" // Only required for REST API
    ENVIRONMENT = var.environment
    LOG_LEVEL   = "INFO"
  }
}
```
`MyWebsite` 구성체는 <Link path="/guides/react-website">`ts#react-website` 생성기</Link>를 사용하여 생성할 수 있습니다
:::