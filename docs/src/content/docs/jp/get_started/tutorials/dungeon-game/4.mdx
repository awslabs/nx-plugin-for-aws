---
title: "AIãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã‚²ãƒ¼ãƒ "
description: "@aws/nx-pluginã‚’ä½¿ç”¨ã—ã¦AIãƒ‘ãƒ¯ãƒ¼ãƒ‰ã®ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³å†’é™ºã‚²ãƒ¼ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã€‚"
---



import { Aside, Code, FileTree, Steps, Tabs, TabItem } from '@astrojs/starlight/components';
import { Image } from 'astro:assets';
import Drawer from '@components/drawer.astro';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import InstallCommand from '@components/install-command.astro';
import E2ECode from '@components/e2e-code.astro';
import E2EDiff from '@components/e2e-diff.astro';

import dungeonAdventureArchitecturePng from '@assets/dungeon-game-architecture.png'
import dungeonAdventureErPng from '@assets/dungeon-adventure-er.png'
import baselineWebsitePng from '@assets/baseline-website.png'
import baselineGamePng from '@assets/baseline-game.png'
import nxGraphPng from '@assets/nx-graph.png'
import gameSelectPng from '@assets/game-select.png'
import gameConversationPng from '@assets/game-conversation.png'

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«4: UIå®Ÿè£…

UIã®æ§‹ç¯‰ã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã«å‘ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:

<NxCommands commands={["run @dungeon-adventure/game-ui:load:runtime-config"]} />

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿ã®`runtime-config.json`ã‚’å–å¾—ã—ã€`packages/game-ui/public`ãƒ•ã‚©ãƒ«ãƒ€å†…ã«ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ã—ã¾ã™ã€‚

æ¬¡ã«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¾ã™:

<NxCommands commands={["run @dungeon-adventure/game-ui:serve"]} />

ãƒ–ãƒ©ã‚¦ã‚¶ã§`http://localhost:4200`ã‚’é–‹ãã¨ã€ãƒ­ã‚°ã‚¤ãƒ³ãŒä¿ƒã•ã‚Œã€æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚å®Œäº†ã™ã‚‹ã¨ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™:

<Image src={baselineWebsitePng} alt="baseline-website.png" width="800" height="600" />

<Aside type="caution">
_ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ®‹ã‚Šã®ä½œæ¥­ä¸­ã¯é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ãŸã¾ã¾ã«ã—ã¦ãã ã•ã„ã€‚å¤‰æ›´ã¯è‡ªå‹•çš„ã«ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚_
</Aside>

### æ–°ã—ã„'/game'ãƒ«ãƒ¼ãƒˆã®ä½œæˆ

`@tanstack/react-router`ã®æ©Ÿèƒ½ã‚’æ´»ç”¨ã—ã¦å‹å®‰å…¨ãªæ–°ã—ã„ãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚æ¬¡ã®å ´æ‰€ã«ç©ºãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„: `packages/game-ui/src/routes/game/index.tsx`ã€‚é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®ãƒ­ã‚°ã«æ³¨ç›®ã—ã¾ã™:

```bash
â™»ï¸  Regenerating routes...
ğŸŸ¡ Updating /Users/dimecha/dungeon-adventure/packages/game-ui/src/routes/game/index.tsx
ğŸŸ¡ Updating /Users/dimecha/dungeon-adventure/packages/game-ui/src/routeTree.gen.ts
âœ… Processed routes in 27ms
```

`@tanstack/react-router`ãŒè‡ªå‹•çš„ã«æ–°ã—ã„ãƒ«ãƒ¼ãƒˆã‚’è¨­å®šã—ã€ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹ãŒç”Ÿæˆã•ã‚Œã¾ã™:

```tsx
import { createFileRoute } from '@tanstack/react-router'

export const Route = createFileRoute('/game/')({
  component: RouteComponent,
})

function RouteComponent() {
  return <div>Hello "/game/"!</div>
}
```

`http://localhost:4200/game`ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨æ–°ã—ã„ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™!

<Image src={baselineGamePng} alt="baseline-game.png" width="800" height="600" />

`index.tsx`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`/game`ãƒ«ãƒ¼ãƒˆã‚’èª­ã¿è¾¼ã‚€ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚`to`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ›´æ–°ã™ã‚‹éš›ã€å‹å®‰å…¨ãªãƒ«ãƒ¼ãƒˆã®å€™è£œãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

<E2EDiff before="dungeon-adventure/4/routes/index.tsx.old.template" after="dungeon-adventure/4/routes/index.tsx.template" lang="tsx" />

ä¸è¦ã«ãªã£ãŸ`packages/game-ui/src/routes/welcome/`ãƒ•ã‚©ãƒ«ãƒ€ã¯å‰Šé™¤ã§ãã¾ã™ã€‚

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®æ›´æ–°

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯SaaSå‹ãƒ“ã‚¸ãƒã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã§ã™ã€‚ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³é¢¨ã‚²ãƒ¼ãƒ ç”¨ã«å†æ§‹æˆã—ã¾ã™ã€‚

`packages/game-ui/src`ã«ä»¥ä¸‹ã®å¤‰æ›´ã‚’åŠ ãˆã¾ã™:

<Tabs>
<TabItem label="config.ts">
<E2EDiff before="dungeon-adventure/4/config.ts.old.template" after="dungeon-adventure/4/config.ts.template" lang="typescript" />
</TabItem>
<TabItem label="components/AppLayout/index.tsx">
<E2ECode path="dungeon-adventure/4/AppLayout/index.tsx.template" lang="tsx" />
</TabItem>
<TabItem label="styles.css">
<E2ECode path="dungeon-adventure/4/styles.css.template" lang="css" />
</TabItem>
</Tabs>

ä¸è¦ãª`packages/game-ui/src/components/AppLayout/navitems.ts`ã¨`packages/game-ui/src/hooks/useAppLayout.tsx`ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‰Šé™¤ã—ã¾ã™ã€‚

### ã‚²ãƒ¼ãƒ ãƒšãƒ¼ã‚¸

APIã‚’å‘¼ã³å‡ºã™ã‚²ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã¦å®Ÿè£…ã‚’å®Œäº†ã—ã¾ã™:

<Tabs>
<TabItem label="index.tsx">
<E2ECode path="dungeon-adventure/4/routes/game/index.tsx.template" lang="tsx" />
</TabItem>
<TabItem label="$playerName.tsx">

<E2ECode path="dungeon-adventure/4/routes/game/$playerName.tsx.template" lang="tsx" />

<Aside type="tip">
`$playerName`æ§‹æ–‡ã¯`@tanstack/react-router`ã«[ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿](https://tanstack.com/router/v1/docs/framework/react/guide/path-params)ã¨ã—ã¦æ‰±ã†ã‚ˆã†æŒ‡ç¤ºã—ã¾ã™ã€‚`validateSearch`ãƒ¡ã‚½ãƒƒãƒ‰ã§`genre`ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚¸ãƒ£ãƒ³ãƒ«åˆ—æŒ™å‹ã«å³å¯†ã«å‹ä»˜ã‘ã—ã¾ã™ã€‚
</Aside>
</TabItem>
</Tabs>

å¤‰æ›´ã‚’åŠ ãˆã‚‹ã¨ã€ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼(`http://localhost:4200/`)ã§ã‚²ãƒ¼ãƒ ã‚’ãƒ—ãƒ¬ã‚¤ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™!

<Drawer title="Build and Deploy" trigger="Cloudfrontã¸ã®ãƒ“ãƒ«ãƒ‰ï¼†ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•">

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰:

<NxCommands commands={['run-many --target build --all']} />

ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ:

<NxCommands commands={['run @dungeon-adventure/infra:deploy dungeon-adventure-infra-sandbox/*']} />

ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€CDKã®å‡ºåŠ›ã‹ã‚‰Cloudfrontã®URLã‚’ç¢ºèªã§ãã¾ã™ã€‚

</Drawer>

<Image src={gameSelectPng} alt="game-select.png" width="500" height="400" />
<div style="margin-top: -100px; margin-left: 100px;">
<Image src={gameConversationPng} alt="game-conversation.png" width="500" height="400" />
</div>

ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼ã‚²ãƒ¼ãƒ ã®æ§‹ç¯‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã—ã¾ã—ãŸ! ğŸ‰ğŸ‰ğŸ‰