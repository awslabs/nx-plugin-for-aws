---
title: "ドキュメント翻訳"
description: "AWS Bedrockを使用したドキュメントの自動翻訳"
---

# ドキュメント翻訳

このプロジェクトは、AWS Bedrockの Haiku 3.5 モデルを使用して、英語から複数の言語に文書を自動翻訳します。翻訳システムは、効率的で正確、かつ使いやすいように設計されています。

## サポートされている言語

現在、以下の言語がサポートされています：

- 日本語 (jp)
- フランス語 (fr)
- スペイン語 (es)
- ドイツ語 (de)
- 中国語 (zh)
- 韓国語 (ko)

## 仕組み

翻訳システムは以下のように動作します：

1. **h2ヘッダーによるドキュメントの分割** - これにより、より効率的な処理と翻訳モデルのより良いコンテキストが可能になります。
2. **マークダウン形式の保持** - すべてのマークダウン構文、コードブロック、HTMLタグは翻訳中に保持されます。
3. **フロントマターの特別な処理** - YAMLフロントマターはその構造を保ちながら翻訳されます。
4. **増分翻訳** - デフォルトでは変更されたファイルのみが翻訳され、時間とリソースが節約されます。

## ローカルで翻訳を実行する

ドキュメンテーションをローカルで翻訳するには、`scripts/translate.ts` スクリプトを使用します：

```bash
# 変更されたファイルのみを日本語に翻訳（デフォルト）
./scripts/translate.ts

# すべてのファイルを翻訳
./scripts/translate.ts --all

# 特定の言語に翻訳
./scripts/translate.ts --languages jp,fr,es

# 実際に翻訳せずに、翻訳される内容を表示
./scripts/translate.ts --dry-run

# 詳細な出力を表示
./scripts/translate.ts --verbose
```

## GitHubワークフロー

GitHubワークフローは、プルリクエストで英語のドキュメンテーションファイルに変更が加えられた際に、自動的にドキュメントを翻訳します。このワークフローは以下を行います：

1. 英語のドキュメンテーションファイルへの変更を検出
2. AWS Bedrockを使用して変更されたファイルを翻訳
3. 翻訳を元のブランチにコミット
4. PRに翻訳ステータスを更新

### 手動ワークフロートリガー

GitHub Actionsタブから翻訳ワークフローを手動でトリガーすることもできます。これは以下の場合に便利です：

- すべてのドキュメンテーションの完全な翻訳の実行
- 特定の言語への翻訳
- 翻訳スクリプトへの変更後の翻訳の更新

## AWS設定

翻訳システムは、AWS BedrockのHaiku 3.5モデルを使用して翻訳を行います。この機能を使用するには、以下が必要です：

1. **AWSクレデンシャル** - ローカル開発の場合、AWS CLIまたは環境変数を使用してAWSクレデンシャルを設定します。
2. **IAMロール** - GitHub Actionsの場合、OIDC認証と、AWS Bedrockに必要な権限を持つIAMロールを設定します。

### 必要な権限

IAMロールまたはユーザーには、以下の権限が必要です：

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "bedrock:InvokeModel"
      ],
      "Resource": [
        "arn:aws:bedrock:*::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
      ]
    }
  ]
}
```

## 翻訳品質

翻訳品質は一般的に高いですが、いくつかの点に注意する必要があります：

- **技術用語** - システムは技術用語を英語のまま保持するように設定されています。
- **コードブロック** - コードブロックは翻訳されず、元の形式のまま保持されます。
- **コンテキスト認識** - 翻訳モデルはドキュメンテーションのコンテキストを理解し、技術翻訳に役立ちます。

## 翻訳のカスタマイズ

`scripts/translate.ts` ファイルを変更することで、翻訳プロセスをカスタマイズできます。可能なカスタマイズには以下のようなものがあります：

- より多くの言語のサポートを追加
- 翻訳モデルの変更
- 翻訳に使用するプロンプトの調整
- ドキュメントの分割と処理方法の修正

## トラブルシューティング

翻訳プロセスで問題が発生した場合:

1. **AWS認証情報の確認** - AWS認証情報が適切に設定されていることを確認してください。
2. **AWSリージョンの確認** - AWS Bedrockが利用可能なリージョンを使用していることを確認してください。
3. **詳細出力での実行** - より詳細なログを表示するには`--verbose`フラグを使用してください。
4. **レート制限の確認** - AWS Bedrockにはレート制限があり、大規模な翻訳ジョブに影響を与える可能性があります。