---
title: "å¿«é€Ÿå…¥é—¨æŒ‡å—"
description: "å…³äºå¦‚ä½•ä½¿ç”¨ @aws/nx-plugin çš„å¿«é€Ÿå…¥é—¨ã€‚"
---



import { Steps } from '@astrojs/starlight/components';
import Link from '@components/link.astro';
import Snippet from '@components/snippet.astro';
import CreateNxWorkspaceCommand from '@components/create-nx-workspace-command.astro';
import InstallCommand from '@components/install-command.astro';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';

æœ¬æŒ‡å—å°†å¸¦æ‚¨äº†è§£å¦‚ä½•å®‰è£…å’Œä½¿ç”¨ `@aws/nx-plugin` å¿«é€Ÿæ„å»º AWS é¡¹ç›®çš„æ ¸å¿ƒæµç¨‹ã€‚

:::tip
å¦‚éœ€æ„å»ºå…¨æ ˆåº”ç”¨çš„æ·±åº¦æ•™ç¨‹ï¼Œè¯·å‚è€ƒ<Link path="get_started/tutorials/dungeon-game/overview">åœ°ä¸‹åŸå†’é™©æ•™ç¨‹</Link>ã€‚
:::

## å‰ç½®æ¡ä»¶

å¼€å§‹å‰è¯·å®‰è£…ä»¥ä¸‹å…¨å±€ä¾èµ–ï¼š

<Snippet name="prerequisites" />

## æ­¥éª¤ä¸€ï¼šåˆå§‹åŒ–æ–° Nx å·¥ä½œåŒº

ä½¿ç”¨æ‚¨é€‰æ‹©çš„åŒ…ç®¡ç†å™¨åˆ›å»º Nx å·¥ä½œåŒºï¼š

<CreateNxWorkspaceCommand workspace="my-project" />

è¿›å…¥é¡¹ç›®ç›®å½•ï¼š

```sh
cd my-project
```

## æ­¥éª¤äºŒï¼šæ·»åŠ  AWS çš„ Nx æ’ä»¶

ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…æ’ä»¶ï¼š

<InstallCommand dev pkg="@aws/nx-plugin" />

## æ­¥éª¤ä¸‰ï¼šä½¿ç”¨ç”Ÿæˆå™¨æ­å»ºé¡¹ç›®

æœ¬å¿«é€Ÿå…¥é—¨æŒ‡å—å°†æ¼”ç¤ºå¦‚ä½•ä¸ºé¡¹ç›®æ·»åŠ  tRPC APIã€React ç½‘ç«™ã€Cognito èº«ä»½éªŒè¯å’Œ CDK åŸºç¡€è®¾æ–½ã€‚æ‚¨å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©ä»»æ„ç»„åˆçš„ç”Ÿæˆå™¨æ¥åˆå§‹åŒ–é¡¹ç›®ã€‚å®Œæ•´é€‰é¡¹åˆ—è¡¨è¯·å‚é˜…å·¦ä¾§å¯¼èˆªæ çš„ __æŒ‡å—__ éƒ¨åˆ†ã€‚

### æ·»åŠ  tRPC API

<RunGenerator generator="ts#trpc-api" requiredParameters={{ apiName: 'demo-api' }} />

è¿™å°†åœ¨ `packages/demo-api` ç›®å½•ä¸‹åˆ›å»º APIã€‚

### æ·»åŠ  React ç½‘ç«™

<RunGenerator generator="ts#cloudscape-website" requiredParameters={{ name: 'demo-website' }} />

è¿™å°†åœ¨ `packages/demo-website` ç›®å½•ä¸‹åˆ›å»º React ç½‘ç«™è„šæ‰‹æ¶ã€‚

### æ·»åŠ  Cognito èº«ä»½éªŒè¯

<RunGenerator generator="ts#cloudscape-website#auth" requiredParameters={{ project: '@my-project/demo-website', cognitoDomain: 'my-demo' }} />

è¿™å°†è®¾ç½®å¿…è¦çš„ AWS åŸºç¡€è®¾æ–½å’Œ React ä»£ç ï¼Œä¸ºç½‘ç«™æ·»åŠ  Cognito èº«ä»½éªŒè¯åŠŸèƒ½ã€‚

### è¿æ¥å‰åç«¯

<RunGenerator generator="api-connection" requiredParameters={{ sourceProject: '@my-project/demo-website', targetProject: '@my-project/demo-api-backend' }} />

è¿™å°†é…ç½®å¿…è¦çš„æä¾›ç¨‹åºï¼Œç¡®ä¿ç½‘ç«™å¯ä»¥è°ƒç”¨ tRPC APIã€‚

### æ·»åŠ  CDK åŸºç¡€è®¾æ–½

<RunGenerator generator="ts#infra" requiredParameters={{ name: 'infra' }} />

è¿™å°†é…ç½®ä¸€ä¸ª CDK Appï¼Œç”¨äºåœ¨ AWS ä¸Šéƒ¨ç½²åŸºç¡€è®¾æ–½ã€‚

## æ­¥éª¤å››ï¼šå®šä¹‰äº‘èµ„æºå¹¶éƒ¨ç½²åˆ° AWS

æ‰“å¼€ `packages/infra/src/stacks/application-stack.ts` å¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```typescript
import * as cdk from 'aws-cdk-lib';
import { DemoApi, DemoWebsite, UserIdentity } from ':my-project/common-constructs';
import { Construct } from 'constructs';

export class ApplicationStack extends cdk.Stack {
  constructor(scope: Construct, id: string, props?: cdk.StackProps) {
    super(scope, id, props);

    const identity = new UserIdentity(this, 'identity');
    const api = new DemoApi(this, 'api');
    api.grantInvokeAccess(identity.identityPool.authenticatedRole);

    new DemoWebsite(this, 'website');
  }
}
```
__æ³¨æ„__ï¼šè¿™æ˜¯æˆ‘ä»¬éƒ¨ç½²å…¨æ ˆåº”ç”¨æ‰€éœ€çš„å…¨éƒ¨ CDK ä»£ç ã€‚

### æ„å»ºå¹¶éƒ¨ç½²åŸºç¡€è®¾æ–½

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ„å»ºé¡¹ç›®ï¼š

<NxCommands commands={['run-many --target build --all']} />

:::tip
è‹¥é‡åˆ° lint é”™è¯¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤è‡ªåŠ¨ä¿®å¤ï¼š

<NxCommands commands={['run-many --target lint --configuration=fix --all']} />
:::

## æ­¥éª¤äº”ï¼šæœ¬åœ°è¿è¡Œå‰ç«¯

<Steps>
1. è·å– `runtime-config.json` æ–‡ä»¶

    <NxCommands commands={['run @demo/demo-website:load:runtime-config']} />

2. å¯åŠ¨æœ¬åœ° Web æœåŠ¡

    <NxCommands commands={['run @demo/demo-website:serve']} />
</Steps>

æ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡ `http://localhost:4200` é¢„è§ˆç½‘ç«™ã€‚

---

æ­å–œï¼ğŸ‰ æ‚¨å·²æˆåŠŸä½¿ç”¨ `@aws/nx-plugin` æ„å»ºå¹¶éƒ¨ç½²å…¨æ ˆåº”ç”¨ï¼