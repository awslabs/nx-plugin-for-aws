---
title: "AI地牢游戏"
description: "使用 @aws/nx-plugin 构建人工智能驱动的地牢冒险游戏的演练。"
---



import { Aside, Code, FileTree, Steps, Tabs, TabItem } from '@astrojs/starlight/components';
import Snippet from '@components/snippet.astro';
import { Image } from 'astro:assets';
import Drawer from '@components/drawer.astro';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import InstallCommand from '@components/install-command.astro';
import dungeonAdventureArchitecturePng from '@assets/dungeon-game-architecture.png'
import dungeonAdventureErPng from '@assets/dungeon-adventure-er.png'
import baselineWebsitePng from '@assets/baseline-website.png'
import baselineGamePng from '@assets/baseline-game.png'
import nxGraphPng from '@assets/nx-graph.png'
import gameSelectPng from '@assets/game-select.png'
import gameConversationPng from '@assets/game-conversation.png'

## 概述

在本教程中，你将构建一个由AI驱动的地牢冒险游戏。本教程不要求具备任何`@aws/nx-plugin`或相关技术的先验知识。你将学到的技术是构建任何基于`@aws/nx-plugin`应用程序的基础，深入理解本教程将使你掌握`@aws/nx-plugin`的核心知识，并初步了解如何使用[NX](https://nx.dev/)。

<Aside>本教程适合喜欢在实践中学习并希望快速实现具体成果的人群。若你更倾向于逐步学习每个概念，请参考左侧导航栏中的独立组件指南。</Aside>

完成本教程的用户将学习如何：

- 使用`@aws/nx-plugin`创建新应用
- 使用NX管理/构建代码库
- 使用tRPC和FastAPI构建API
- 使用TanStack Router创建新页面
- 使用TanStack Query调用后端API
- 根据需求修改生成代码
- 创建并部署CDK基础设施

## 你将构建什么？

在本教程中，你将使用`@aws/nx-plugin`构建一个由AI驱动的地牢冒险游戏。

以下是完成教程后的最终效果展示：

<Image src={gameSelectPng} alt="game-select.png" width="500" height="400" />
<div style="margin-top: -100px; margin-left: 100px;">
<Image src={gameConversationPng} alt="game-conversation.png" width="500" height="400" />
</div>

### 应用组件

我们将使用以下组件架构构建AI地牢冒险游戏：

<Image class="white-bg" src={dungeonAdventureArchitecturePng} alt="dungeon-game-architecture.png" width="800" height="600" />

1. [tRPC](https://trpc.io/) API使用[ElectroDB](https://electrodb.dev/)/[DynamoDB](https://aws.amazon.com/dynamodb/)管理游戏状态
2. Python/[FastAPI](https://fastapi.tiangolo.com/) Lambda函数通过流式响应生成故事情节（由[Amazon Bedrock](https://aws.amazon.com/bedrock/)提供支持）
3. React/Vite前端网站包含：
  - 使用Amazon Cognito/Identity Pools进行安全API调用
  - 支持类型安全文件路由的[TanStack Router](https://tanstack.com/router/latest)
  - 用于调用游戏和故事API的生成SDK（基于[TanStack Query](https://tanstack.com/query/latest)）

部署应用组件所需的[CDK](https://docs.aws.amazon.com/cdk/v2/guide/home.html)基础设施

## 先决条件

开始前请安装以下全局依赖：

<Snippet name="prerequisites" />
- 确保在目标区域的AWS账户中已启用对Amazon Bedrock中Anthropic Claude 3.5 Sonnet v2模型的访问权限。具体配置步骤请参考[添加或移除Amazon Bedrock基础模型访问权限](https://docs.aws.amazon.com/bedrock/latest/userguide/model-access-modify.html)章节。