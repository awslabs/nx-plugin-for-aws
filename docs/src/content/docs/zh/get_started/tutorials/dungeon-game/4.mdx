---
title: "AIåœ°ç‰¢æ¸¸æˆ"
description: "ä½¿ç”¨ @aws/nx-plugin æ„å»ºäººå·¥æ™ºèƒ½é©±åŠ¨çš„åœ°ç‰¢å†’é™©æ¸¸æˆçš„æ¼”ç»ƒã€‚"
---



import { Aside, Code, FileTree, Steps, Tabs, TabItem } from '@astrojs/starlight/components';
import { Image } from 'astro:assets';
import Drawer from '@components/drawer.astro';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import InstallCommand from '@components/install-command.astro';
import E2ECode from '@components/e2e-code.astro';
import E2EDiff from '@components/e2e-diff.astro';

import dungeonAdventureArchitecturePng from '@assets/dungeon-game-architecture.png'
import dungeonAdventureErPng from '@assets/dungeon-adventure-er.png'
import baselineWebsitePng from '@assets/baseline-website.png'
import baselineGamePng from '@assets/baseline-game.png'
import nxGraphPng from '@assets/nx-graph.png'
import gameSelectPng from '@assets/game-select.png'
import gameConversationPng from '@assets/game-conversation.png'

## æ¨¡å—å››ï¼šç”¨æˆ·ç•Œé¢å®ç°

è¦å¼€å§‹æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œæˆ‘ä»¬éœ€è¦å°†æœ¬åœ°å¼€å‘æœåŠ¡å™¨æŒ‡å‘å·²éƒ¨ç½²çš„æ²™ç›’ç¯å¢ƒã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

<NxCommands commands={["run @dungeon-adventure/game-ui:load:runtime-config"]} />

è¯¥å‘½ä»¤å°†æ‹‰å–å·²éƒ¨ç½²çš„ `runtime-config.json` æ–‡ä»¶ï¼Œå¹¶å­˜å‚¨åœ¨æœ¬åœ° `packages/game-ui/public` ç›®å½•ä¸­ã€‚

ç°åœ¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

<NxCommands commands={["run @dungeon-adventure/game-ui:serve"]} />

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æœ¬åœ°ç½‘ç«™åï¼Œç³»ç»Ÿä¼šæç¤ºç™»å½•å¹¶åˆ›å»ºæ–°ç”¨æˆ·ã€‚å®Œæˆæ“ä½œåå³å¯çœ‹åˆ°åŸºç¡€ç½‘ç«™ç•Œé¢ï¼š

<Image src={baselineWebsitePng} alt="baseline-website.png" width="800" height="600" />

<Aside type="caution">
_è¯·ä¿æŒå¼€å‘æœåŠ¡å™¨æŒç»­è¿è¡Œï¼Œåç»­æ‰€æœ‰ä¿®æ”¹éƒ½å°†è‡ªåŠ¨çƒ­æ›´æ–°ã€‚_
</Aside>

### åˆ›å»ºæ–°è·¯ç”± '/game'

æˆ‘ä»¬å°†é€šè¿‡ `@tanstack/react-router` åˆ›å»ºç±»å‹å®‰å…¨çš„æ–°è·¯ç”±ã€‚åœ¨æŒ‡å®šä½ç½®åˆ›å»ºç©ºæ–‡ä»¶ï¼š`packages/game-ui/src/routes/game/index.tsx`ï¼Œæ³¨æ„è§‚å¯Ÿå¼€å‘æœåŠ¡å™¨æ—¥å¿—ï¼š

```bash
â™»ï¸  é‡æ–°ç”Ÿæˆè·¯ç”±ä¸­...
ğŸŸ¡ æ›´æ–° /Users/dimecha/dungeon-adventure/packages/game-ui/src/routes/game/index.tsx
ğŸŸ¡ æ›´æ–° /Users/dimecha/dungeon-adventure/packages/game-ui/src/routeTree.gen.ts
âœ… è·¯ç”±å¤„ç†å®Œæˆï¼Œè€—æ—¶27ms
```

`@tanstack/react-router` å·²è‡ªåŠ¨é…ç½®æ–°è·¯ç”±ï¼Œæ–‡ä»¶å†…å®¹å·²åŒ…å«è·¯ç”±è·¯å¾„ï¼š

```tsx
import { createFileRoute } from '@tanstack/react-router'

export const Route = createFileRoute('/game/')({
  component: RouteComponent,
})

function RouteComponent() {
  return <div>Hello "/game/"!</div>
}
```

è®¿é—® `http://localhost:4200/game` å³å¯çœ‹åˆ°æ–°é¡µé¢ï¼š

<Image src={baselineGamePng} alt="baseline-game.png" width="800" height="600" />

æ›´æ–° `index.tsx` æ–‡ä»¶ä»¥é»˜è®¤åŠ è½½æ–°è·¯ç”±ã€‚æ³¨æ„ä¿®æ”¹ `to` å­—æ®µæ—¶ï¼Œç³»ç»Ÿä¼šæä¾›ç±»å‹å®‰å…¨çš„è·¯ç”±é€‰é¡¹ã€‚

<E2EDiff before="dungeon-adventure/4/routes/index.tsx.old.template" after="dungeon-adventure/4/routes/index.tsx.template" lang="tsx" />

æœ€åå¯åˆ é™¤ä¸å†éœ€è¦çš„ `packages/game-ui/src/routes/welcome/` ç›®å½•ã€‚

### å¸ƒå±€æ›´æ–°

é»˜è®¤å¸ƒå±€æ›´é€‚åˆSaaSç±»å•†ä¸šåº”ç”¨ï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ•´ä¸ºåœ°ç‰¢é£æ ¼æ¸¸æˆç•Œé¢ã€‚ä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ï¼š

<Tabs>
<TabItem label="config.ts">
<E2EDiff before="dungeon-adventure/4/config.ts.old.template" after="dungeon-adventure/4/config.ts.template" lang="typescript" />
</TabItem>
<TabItem label="components/AppLayout/index.tsx">
<E2ECode path="dungeon-adventure/4/AppLayout/index.tsx.template" lang="tsx" />
</TabItem>
<TabItem label="styles.css">
<E2ECode path="dungeon-adventure/4/styles.css.template" lang="css" />
</TabItem>
</Tabs>

åˆ é™¤ä¸å†ä½¿ç”¨çš„ `packages/game-ui/src/components/AppLayout/navitems.ts` å’Œ `packages/game-ui/src/hooks/useAppLayout.tsx` æ–‡ä»¶ã€‚

### æ¸¸æˆé¡µé¢

åˆ›å»ºè°ƒç”¨APIçš„æ¸¸æˆé¡µé¢å®Œæˆæœ€ç»ˆå®ç°ï¼š

<Tabs>
<TabItem label="index.tsx">
<E2ECode path="dungeon-adventure/4/routes/game/index.tsx.template" lang="tsx" />
</TabItem>
<TabItem label="$playerName.tsx">

<E2ECode path="dungeon-adventure/4/routes/game/$playerName.tsx.template" lang="tsx" />

<Aside type="tip">
`$playerName` è¯­æ³•æŒ‡ç¤º `@tanstack/react-router` å°† `playerName` ä½œä¸º[è·¯å¾„å‚æ•°](https://tanstack.com/router/v1/docs/framework/react/guide/path-params)å¤„ç†ã€‚`validateSearch` æ–¹æ³•ç¡®ä¿ `genre` æŸ¥è¯¢å‚æ•°ä¸¥æ ¼åŒ¹é…æšä¸¾ç±»å‹ã€‚
</Aside>
</TabItem>
</Tabs>

å®Œæˆä¿®æ”¹åï¼Œè®¿é—®æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼ˆhttp://localhost:4200/ï¼‰å³å¯å¼€å§‹æ¸¸æˆï¼

<Drawer title="æ„å»ºä¸éƒ¨ç½²" trigger="å¦‚éœ€éƒ¨ç½²åˆ°Cloudfrontï¼Œå¯æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š">

æ„å»ºå‘½ä»¤ï¼š

<NxCommands commands={['run-many --target build --all']} />

éƒ¨ç½²åº”ç”¨ï¼š

<NxCommands commands={['run @dungeon-adventure/infra:deploy dungeon-adventure-infra-sandbox/*']} />

éƒ¨ç½²å®Œæˆåï¼Œå¯åœ¨CDKéƒ¨ç½²è¾“å‡ºä¸­æŸ¥çœ‹Cloudfrontè®¿é—®åœ°å€ã€‚

</Drawer>

<Image src={gameSelectPng} alt="game-select.png" width="500" height="400" />
<div style="margin-top: -100px; margin-left: 100px;">
<Image src={gameConversationPng} alt="game-conversation.png" width="500" height="400" />
</div>

æ­å–œï¼æ‚¨å·²æˆåŠŸæ„å»ºå¹¶éƒ¨ç½²åœ°ç‰¢å†’é™©æ¸¸æˆï¼ğŸ‰ğŸ‰ğŸ‰