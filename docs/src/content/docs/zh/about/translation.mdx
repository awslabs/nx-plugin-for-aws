---
title: "文档翻译"
description: "使用 AWS Bedrock 自动翻译文档"
---



# 文档翻译

本项目使用 AWS Bedrock 的 Haiku 3.5 模型自动将文档从英语翻译为多种语言。该翻译系统设计高效、准确且易于使用。

## 支持语言

当前支持以下语言：

- 日语（jp）
- 法语（fr）
- 西班牙语（es）
- 德语（de）
- 中文（zh）
- 韩语（ko）

## 工作原理

翻译系统的工作流程如下：

1. **按 h2 标题拆分文档** - 这有助于更高效地处理并为翻译模型提供更好的上下文
2. **保留 Markdown 格式** - 所有 Markdown 语法、代码块和 HTML 标签在翻译过程中都会被保留
3. **特殊处理 frontmatter** - YAML frontmatter 会被翻译同时保持其结构
4. **增量翻译** - 默认仅翻译更改过的文件，节省时间和资源

## 本地运行翻译

使用 `scripts/translate.ts` 脚本进行本地文档翻译：

```bash
# 仅将更改文件翻译为日语（默认）
./scripts/translate.ts

# 翻译所有文件
./scripts/translate.ts --all

# 翻译到指定语言
./scripts/translate.ts --languages jp,fr,es

# 显示将要翻译的内容而不实际执行翻译
./scripts/translate.ts --dry-run

# 显示详细输出
./scripts/translate.ts --verbose
```

## GitHub 工作流

GitHub 工作流会在 pull request 中英语文档发生变更时自动执行翻译。该工作流：

1. 检测英语文档文件的变更
2. 使用 AWS Bedrock 翻译变更文件
3. 将翻译结果提交回源分支
4. 在 PR 中更新翻译状态

### 手动触发工作流

您也可以从 GitHub Actions 标签页手动触发翻译工作流。这在以下场景很有用：

- 执行全量文档翻译
- 翻译到特定语言
- 修改翻译脚本后更新翻译

## AWS 配置

翻译系统使用 AWS Bedrock 的 Haiku 3.5 模型进行翻译。要使用此功能需要：

1. **AWS 凭证** - 本地开发时需通过 AWS CLI 或环境变量配置凭证
2. **IAM 角色** - GitHub Actions 中需配置具有 OIDC 认证和 AWS Bedrock 必要权限的 IAM 角色

### 所需权限

IAM 角色或用户需要以下权限：

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "bedrock:InvokeModel"
      ],
      "Resource": [
        "arn:aws:bedrock:*::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
      ]
    }
  ]
}
```

## 翻译质量

翻译质量总体较高，但需注意以下事项：

- **专业术语** - 系统配置为保留英文专业术语
- **代码块** - 代码块不做翻译，应保持原样
- **上下文理解** - 翻译模型能理解文档上下文，有助于技术翻译准确性

## 自定义翻译

您可以通过修改 `scripts/translate.ts` 文件来自定义翻译流程，可能的自定义包括：

- 添加更多语言支持
- 更换翻译模型
- 调整翻译提示词
- 修改文档拆分和处理方式

## 故障排查

若遇到翻译问题：

1. **检查 AWS 凭证** - 确保凭证配置正确
2. **检查 AWS 区域** - 确认使用支持 AWS Bedrock 的区域
3. **启用详细输出** - 使用 `--verbose` 标志查看详细日志
4. **检查速率限制** - AWS Bedrock 的速率限制可能影响大批量翻译作业