---
title: "Servidor Python MCP"
description: "Generar un servidor de Protocolo de Contexto de Modelo (MCP) en Python para proporcionar contexto a Modelos de Lenguaje de Gran Escala"
---



import { FileTree } from '@astrojs/starlight/components';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import Link from '@components/link.astro';
import Snippet from '@components/snippet.astro';
import GeneratorParameters from '@components/generator-parameters.astro';

Genera un servidor Python del [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) para proporcionar contexto a Modelos de Lenguaje Grande (LLMs), y opcionalmente desplegarlo en [Amazon Bedrock AgentCore](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/).

## ¿Qué es MCP?

El [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) es un estándar abierto que permite a asistentes de IA interactuar con herramientas y recursos externos. Proporciona una forma consistente para que los LLMs puedan:

- Ejecutar herramientas (funciones) que realizan acciones o recuperan información
- Acceder a recursos que proveen contexto o datos

## Uso

### Generar un servidor MCP

Puedes generar un servidor MCP en Python de dos formas:

<RunGenerator generator="py#mcp-server" />

:::tip
Primero usa el generador <Link path="/guides/python-project">`py#project`</Link> para crear un proyecto al que añadir tu servidor MCP.
:::

### Opciones

<GeneratorParameters generator="py#mcp-server" />

## Salida del generador

El generador añadirá los siguientes archivos a tu proyecto Python existente:

<FileTree>
  - your-project/
    - your_module/
      - mcp_server/ (o nombre personalizado si se especifica)
        - \_\_init\_\_.py Inicialización del paquete Python
        - server.py Definición principal del servidor con herramientas y recursos de ejemplo
        - stdio.py Punto de entrada para transporte STDIO, útil para servidores MCP locales simples
        - http.py Punto de entrada para transporte HTTP transmitible, útil para alojar tu servidor MCP
        - Dockerfile Punto de entrada para alojar tu servidor MCP (excluido cuando `computeType` se establece en `None`)
    - pyproject.toml Actualizado con dependencias MCP
    - project.json Actualizado con objetivos de servicio del servidor MCP
</FileTree>

### Infraestructura

:::note
Si seleccionaste `None` para `computeType`, el generador no proporcionará ningún Infrastructure as Code.
:::

<Snippet name="shared-constructs" />

<Snippet name="mcp/shared-constructs" />

## Trabajando con tu servidor MCP

### Añadiendo herramientas

Las herramientas son funciones que el asistente de IA puede llamar para realizar acciones. El servidor MCP en Python usa la biblioteca [MCP Python SDK (FastMCP)](https://github.com/modelcontextprotocol/python-sdk), que provee un enfoque basado en decoradores para definir herramientas.

Puedes añadir nuevas herramientas en el archivo `server.py`:

```python
@mcp.tool(description="Descripción de tu herramienta")
def your_tool_name(param1: str, param2: int) -> str:
    """Implementación de la herramienta con sugerencias de tipo"""
    # Tu lógica de herramienta aquí
    return f"Resultado: {param1} con {param2}"
```

La biblioteca FastMCP maneja automáticamente:
- Validación de tipos basada en las sugerencias de tipo de tu función
- Generación de esquemas JSON para el protocolo MCP
- Manejo de errores y formato de respuestas

### Añadiendo recursos

Los recursos proveen contexto al asistente de IA. Puedes añadir recursos usando el decorador `@mcp.resource`:

```python
@mcp.resource("example://static-resource", description="Ejemplo de recurso estático")
def static_resource() -> str:
    """Retorna contenido estático"""
    return "Este es contenido estático que provee contexto a la IA"

@mcp.resource("dynamic://resource/{item_id}", description="Ejemplo de recurso dinámico")
def dynamic_resource(item_id: str) -> str:
    """Retorna contenido dinámico basado en parámetros"""
    # Obtiene datos basados en item_id
    data = fetch_data_for_item(item_id)
    return f"Contenido dinámico para {item_id}: {data}"
```

## Configuración con asistentes de IA

<Snippet name="mcp/configuration-py" parentHeading="Configuración con asistentes de IA" />

## Ejecutando tu servidor MCP

### Inspector

El generador configura un objetivo llamado `<your-server-name>-inspect`, que inicia el [MCP Inspector](https://github.com/modelcontextprotocol/inspector) con la configuración para conectarse a tu servidor MCP usando transporte STDIO.

<NxCommands commands={['run your-project:your-server-name-inspect']} />

Esto iniciará el inspector en `http://localhost:6274`. Comienza haciendo clic en el botón "Connect".

### STDIO

La forma más fácil de probar y usar un servidor MCP es mediante el inspector o configurándolo con un asistente de IA (como se mencionó anteriormente).

Sin embargo, puedes ejecutar tu servidor con [transporte STDIO](https://modelcontextprotocol.io/docs/concepts/transports#standard-input%2Foutput-stdio) directamente usando el objetivo `<your-server-name>-serve-stdio`.

<NxCommands commands={['run your-project:your-server-name-serve-stdio']} />

Este comando usa `uv run` para ejecutar tu servidor MCP con transporte STDIO.

### HTTP transmitible

Si prefieres ejecutar tu servidor MCP localmente usando [transporte HTTP transmitible](https://modelcontextprotocol.io/docs/concepts/transports#streamable-http), puedes usar el objetivo `<your-server-name>-serve-http`.

<NxCommands commands={['run your-project:your-server-name-serve-http']} />

Este comando usa `uv run` para ejecutar tu servidor MCP con transporte HTTP, típicamente en el puerto 8000.

## Implementación de tu servidor MCP en Bedrock AgentCore Runtime

<Snippet name="mcp/bedrock-deployment" parentHeading="Implementación de tu servidor MCP en Bedrock AgentCore Runtime" />

### Objetivos de bundle y Docker

Para construir tu servidor MCP para Bedrock AgentCore Runtime, se añade un objetivo `bundle` a tu proyecto, que:

- Exporta tus dependencias Python a un archivo `requirements.txt` usando `uv export`
- Instala dependencias para la plataforma objetivo (`aarch64-manylinux2014`) usando `uv pip install`

También se añade un objetivo `docker` específico para tu servidor MCP, que:

- Construye una imagen Docker desde el `Dockerfile` que ejecuta tu servidor MCP en el puerto `8000`, según el [contrato de protocolo MCP](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/runtime-service-contract.html#mcp-protocol-contract)

:::tip
La imagen Docker se construye usando una etiqueta (por ejemplo `my-scope-my-project-mcp-server:latest`), que es referenciada por tu infraestructura CDK o Terraform, permitiendo que tu `Dockerfile` esté ubicado junto a tu proyecto de servidor MCP.
:::

### Observabilidad

<Snippet name="mcp/observability" parentHeading="Observabilidad" />