---
title: "ts#mcp-server"
description: "Generar un servidor de Protocolo de Contexto de Modelo (MCP) de TypeScript para proporcionar contexto a Modelos de Lenguaje de Gran Escala"
---



import { FileTree } from '@astrojs/starlight/components';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import Link from '@components/link.astro';
import GeneratorParameters from '@components/generator-parameters.astro';
import schema from '../../../../../../packages/nx-plugin/src/ts/mcp-server/schema.json';

# Generador de Servidor MCP en TypeScript

Genera un servidor [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) en TypeScript para proporcionar contexto a Modelos de Lenguaje Grandes (LLMs).

## ¿Qué es MCP?

El [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) es un estándar abierto que permite a los asistentes de IA interactuar con herramientas y recursos externos. Proporciona una forma consistente para que los LLMs puedan:

- Ejecutar herramientas (funciones) que realizan acciones o recuperan información
- Acceder a recursos que proveen contexto o datos

## Uso

### Generar un servidor MCP

Puedes generar un servidor MCP en TypeScript de dos formas:

<RunGenerator generator="ts#mcp-server" />

### Opciones

<GeneratorParameters generator="ts#mcp-server" />

## Salida del Generador

El generador creará los siguientes archivos del proyecto:

<FileTree>
  - packages/\<nombre>/
    - README.md Documentación del servidor MCP con instrucciones de uso
    - project.json Configuración del proyecto Nx con objetivos de build, bundle y dev
    - src/
      - index.ts Punto de entrada del servidor MCP
      - server.ts Definición principal del servidor, con herramientas y recursos
      - global.d.ts Declaraciones de tipos TypeScript para importar archivos markdown
      - resources/
        - example-context.md Archivo markdown de ejemplo usado como recurso para el servidor MCP
</FileTree>

:::note
Consulta la <Link path="/guides/typescript-project">documentación del generador de proyectos TypeScript</Link> para más detalles sobre la salida del generador.
:::

## Trabajando con tu Servidor MCP

### Añadiendo Herramientas

Las herramientas son funciones que el asistente de IA puede ejecutar. Puedes añadir nuevas herramientas en el archivo `server.ts`:

```typescript
server.tool("nombreHerramienta",
  { param1: z.string(), param2: z.number() }, // Esquema de entrada usando Zod
  async ({ param1, param2 }) => {
    // Implementación de la herramienta
    return {
      content: [{ type: "text", text: "Resultado" }]
    };
  }
);
```

### Añadiendo Recursos

Los recursos proveen contexto al asistente de IA. Puedes añadir recursos estáticos desde archivos o recursos dinámicos:

```typescript
// Recurso estático desde archivo
import exampleContext from './resources/example-context.md';

server.resource('nombre-recurso', 'example://recurso', async (uri) => ({
  contents: [{ uri: uri.href, text: exampleContext }],
}));

// Recurso dinámico
server.resource('recurso-dinamico', 'dynamic://recurso', async (uri) => {
  const data = await obtenerDatos();
  return {
    contents: [{ uri: uri.href, text: data }],
  };
});
```

## Configuración con Asistentes de IA

Para usar tu servidor MCP con asistentes de IA, primero debes empaquetarlo:

<NxCommands commands={['run your-mcp-server:bundle']} />

Esto crea una versión empaquetada en `dist/packages/your-mcp-server/bundle/index.js` (la ruta puede variar según tu configuración).

### Archivos de Configuración

La mayoría de asistentes de IA que soportan MCP usan un enfoque similar. Deberás crear/actualizar un archivo de configuración con los detalles de tu servidor:

```json
{
  "mcpServers": {
    "your-mcp-server": {
      "command": "node",
      "args": [
        "/ruta/al/workspace/dist/packages/your-mcp-server/bundle/index.js"
      ],
      "transportType": "stdio"
    }
  }
}
```

Reemplaza `/ruta/al/workspace/dist/packages/your-mcp-server/bundle/index.js` con la ruta real a tu servidor empaquetado.

:::caution
Si recibes un error como `ENOENT node` al conectar, quizás debes especificar la ruta completa a `node`, que puedes obtener ejecutando `which node` en tu terminal.
:::

### Configuración Específica por Asistente

Consulta estas guías para configurar MCP con asistentes específicos:

- [Amazon Q Developer](https://docs.aws.amazon.com/amazonq/latest/qdeveloper-ug/command-line-mcp-configuration.html)
- [Cline](https://docs.cline.bot/mcp-servers/configuring-mcp-servers)
- [Cursor](https://docs.cursor.com/context/model-context-protocol)
- [Claude Code](https://docs.anthropic.com/en/docs/agents-and-tools/claude-code/tutorials#set-up-model-context-protocol-mcp)

:::tip
Algunos asistentes como Amazon Q Developer permiten configuración de servidores MCP a nivel de workspace, útil para definir servidores relevantes a un proyecto.
:::

## Flujo de Desarrollo

### Objetivos de Build

Este generador se basa en el <Link path="/guides/typescript-project">generador de proyectos TypeScript</Link> y hereda sus objetivos, añadiendo estos adicionales:

#### Bundle

El objetivo `bundle` usa [esbuild](https://esbuild.github.io/) para crear un único archivo JavaScript empaquetado:

<NxCommands commands={['run your-mcp-server:bundle']} />

Esto genera el bundle en `dist/packages/your-mcp-server/bundle/index.js` (ruta puede variar).

#### Dev

El objetivo `dev` monitorea cambios y reconstruye automáticamente:

<NxCommands commands={['run your-mcp-server:dev']} />

Es útil durante desarrollo para que tu asistente use siempre la última versión.

:::note
Algunos asistentes requieren reiniciar el servidor MCP para aplicar cambios.
:::