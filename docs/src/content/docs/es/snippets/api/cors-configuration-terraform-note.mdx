---
title: "Configuración de CORS en Terraform"
---

import Link from '@components/link.astro';

:::note
Si su solución incluye un módulo de sitio web de Terraform, entonces puede usar su nombre de dominio de CloudFront para restringir CORS.
Dado un nombre de dominio de CloudFront `<domain_name>`, dentro del módulo de Terraform para implementar su API agregue
- una propiedad `cors_allow_origins`, establecida en `["http://localhost:4200", "http://localhost:4300", "https://<domain name>"]`, para APIs HTTP. Esto restringe el CORS del gateway de API a esta distribución y host local.
- una variable de entorno `ALLOWED_ORIGINS`, establecida en `"https://<domain_name>"`, para APIs REST. Esto establece la distribución de CloudFront como el único origen CORS permitido (aparte de host local) en las integraciones de AWS Lambda. Tenga en cuenta que esta restricción no se aplica a las solicitudes preflight OPTIONS - por favor +1 [este issue de GitHub](https://github.com/awslabs/nx-plugin-for-aws/issues/377) para ayudar a priorizar la resolución de esto.

```hcl {4,7}
module "my_api" {
  source = "../../common/terraform/src/app/apis/my-api"

  cors_allow_origins = ["http://localhost:4200", "http://localhost:4300", "https://<domain name>"] // Only required for HTTP API

  env = {
    ALLOWED_ORIGINS = "https://<domain name>" // Only required for REST API
    ENVIRONMENT = var.environment
    LOG_LEVEL   = "INFO"
  }
}
```
El constructo `MyWebsite` puede ser generado usando el <Link path="/guides/react-website">generador `ts#react-website`</Link>
:::