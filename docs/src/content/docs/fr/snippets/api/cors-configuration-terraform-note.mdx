---
title: "Configuration CORS Terraform"
---

import Link from '@components/link.astro';

:::note
Si votre solution inclut un module de site web Terraform, vous pouvez utiliser son nom de domaine CloudFront pour restreindre CORS.
Étant donné un nom de domaine CloudFront `<domain_name>`, dans le module Terraform pour déployer votre API, ajoutez
- une propriété `cors_allow_origins`, définie sur `["http://localhost:4200", "http://localhost:4300", "https://<domain name>"]`, pour les API HTTP. Cela restreint le CORS de la passerelle API à cette distribution et à l'hôte local.
- une variable d'environnement `ALLOWED_ORIGINS`, définie sur `"https://<domain_name>"`, pour les API REST. Cela définit la distribution CloudFront comme la seule origine CORS autorisée (autre que l'hôte local) dans les intégrations AWS Lambda. Notez que cette restriction ne s'applique pas aux OPTIONS de pré-vérification - veuillez +1 [ce problème GitHub](https://github.com/awslabs/nx-plugin-for-aws/issues/377) pour aider à prioriser la résolution de ce point.

```hcl {4,7}
module "my_api" {
  source = "../../common/terraform/src/app/apis/my-api"

  cors_allow_origins = ["http://localhost:4200", "http://localhost:4300", "https://<domain name>"] // Only required for HTTP API

  env = {
    ALLOWED_ORIGINS = "https://<domain name>" // Only required for REST API
    ENVIRONMENT = var.environment
    LOG_LEVEL   = "INFO"
  }
}
```
Le construct `MyWebsite` peut être généré en utilisant le <Link path="/guides/react-website">générateur `ts#react-website`</Link>
:::