---
title: "Guide de D√©marrage Rapide"
description: "Un d√©marrage rapide sur l'utilisation de @aws/nx-plugin."
---



import { Steps } from '@astrojs/starlight/components';
import Link from '@components/link.astro';
import Snippet from '@components/snippet.astro';
import CreateNxWorkspaceCommand from '@components/create-nx-workspace-command.astro';
import InstallCommand from '@components/install-command.astro';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';

Ce guide vous explique les bases de l'installation et de l'utilisation de `@aws/nx-plugin` pour d√©velopper rapidement des projets sur AWS.

:::tip
Pour un tutoriel plus approfondi sur la cr√©ation d'une application full-stack, consultez le <Link path="get_started/tutorials/dungeon-game/overview">Tutoriel Dungeon Adventure</Link>.
:::

## Pr√©requis

Les d√©pendances globales suivantes sont n√©cessaires avant de continuer :

<Snippet name="prerequisites" />

## √âtape 1 : Initialiser un nouvel espace de travail Nx

Ex√©cutez la commande suivante pour cr√©er un espace de travail Nx avec le gestionnaire de paquets de votre choix :

<CreateNxWorkspaceCommand workspace="my-project" />

Une fois termin√©, acc√©dez au r√©pertoire du projet :

```sh
cd my-project
```

## √âtape 2 : Utiliser les g√©n√©rateurs pour structurer votre projet

Dans ce guide rapide, nous ajouterons une API tRPC, un site React, une authentification Cognito et une infrastructure CDK. Selon le type de projet que vous construisez, vous pouvez choisir n'importe quelle combinaison de g√©n√©rateurs pour initialiser rapidement votre projet. Consultez les __Guides__ dans la barre de navigation √† gauche pour voir la liste compl√®te des options.

### Ajouter une API tRPC

<RunGenerator generator="ts#trpc-api" requiredParameters={{ name: 'demo-api', auth: 'IAM' }} />

Ceci cr√©era l'API dans le dossier `packages/demo-api`.

### Ajouter un site React

<RunGenerator generator="ts#react-website" requiredParameters={{ name: 'demo-website' }} />

Ceci scaffoldera un nouveau site React dans `packages/demo-website`.

### Ajouter l'authentification Cognito

<RunGenerator generator="ts#react-website#auth" requiredParameters={{ project: '@my-project/demo-website', cognitoDomain: 'my-demo' }} />

Ceci configure l'infrastructure n√©cessaire et le code React pour ajouter l'authentification Cognito √† votre site.

### Connecter le frontend au backend

<RunGenerator generator="api-connection" requiredParameters={{ sourceProject: '@my-project/demo-website', targetProject: '@my-project/demo-api' }} />

Ceci configure les fournisseurs n√©cessaires pour que votre site puisse appeler votre API tRPC.

### Ajouter l'infrastructure CDK

<RunGenerator generator="ts#infra" requiredParameters={{ name: 'infra' }} />

Ceci configure une application CDK que vous pouvez utiliser pour d√©ployer votre infrastructure sur AWS.

## √âtape 3 : Ex√©cuter votre site et API localement

Utilisez la commande suivante pour d√©marrer les serveurs de d√©veloppement locaux pour votre site et ses APIs connect√©es :

<NxCommands commands={['run demo-website:serve-local']} />

Votre site sera disponible √† l'adresse `http://localhost:4200`.

Les modifications apport√©es √† votre site et √† votre API seront refl√©t√©es en temps r√©el gr√¢ce au rechargement √† chaud des serveurs locaux.

## √âtape 4 : D√©finir les ressources cloud et d√©ployer sur AWS

Ouvrez `packages/infra/src/stacks/application-stack.ts` et ajoutez le code suivant :

```typescript
import * as cdk from 'aws-cdk-lib';
import { DemoApi, DemoWebsite, UserIdentity } from ':my-project/common-constructs';
import { Construct } from 'constructs';

export class ApplicationStack extends cdk.Stack {
  constructor(scope: Construct, id: string, props?: cdk.StackProps) {
    super(scope, id, props);

    const identity = new UserIdentity(this, 'identity');
    const api = new DemoApi(this, 'api', {
      integrations: DemoApi.defaultIntegrations(this).build(),
    });
    api.grantInvokeAccess(identity.identityPool.authenticatedRole);

    new DemoWebsite(this, 'website');
  }
}
```

C'est tout le code CDK n√©cessaire pour d√©ployer notre application full-stack.

### Construire et d√©ployer l'infrastructure

Ensuite, ex√©cutez la commande suivante pour construire votre projet :

<NxCommands commands={['run-many --target build --all']} />

:::tip
Si vous rencontrez des erreurs de lint, vous pouvez ex√©cuter cette commande pour les corriger automatiquement :

<NxCommands commands={['run-many --target lint --configuration=fix --all']} />
:::

Ex√©cutez la commande suivante pour d√©ployer votre projet :

<NxCommands commands={['run infra:deploy --all']} />

:::tip
Vous devrez vous assurer que votre environnement AWS est correctement bootstrap√© pour CDK.

Le bootstrap CDK est requis √† la fois pour votre r√©gion AWS de d√©ploiement cible, et pour `us-east-1` afin de permettre le d√©ploiement du WebACL AWS WAF pour le site.

<NxCommands commands={['run infra:bootstrap']} />
:::

## √âtape 5 : Tester le site avec les ressources cloud d√©ploy√©es

<Steps>
1. R√©cup√©rez le fichier `runtime-config.json` :

    <NxCommands commands={['run demo-website:load:runtime-config']} />

2. D√©marrez le serveur local du site

    <NxCommands commands={['run demo-website:serve']} />
</Steps>

Votre site sera disponible √† l'adresse `http://localhost:4200`, et pointera vers les ressources d√©ploy√©es pour l'API et l'authentification.

---

F√©licitations ! üéâ Vous avez r√©ussi √† construire et d√©ployer une application full-stack en utilisant `@aws/nx-plugin` !