---
title: "Serveur MCP TypeScript"
description: "Générer un serveur de protocole de contexte de modèle (MCP) TypeScript pour fournir du contexte aux modèles de langage de grande taille"
---



import { FileTree } from '@astrojs/starlight/components';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import Link from '@components/link.astro';
import Snippet from '@components/snippet.astro';
import GeneratorParameters from '@components/generator-parameters.astro';

Générez un serveur [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) TypeScript pour fournir du contexte aux Grands Modèles de Langage (LLMs).

## Qu'est-ce que le MCP ?

Le [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) est un standard ouvert permettant aux assistants IA d'interagir avec des outils et ressources externes. Il fournit une méthode cohérente pour que les LLM puissent :

- Exécuter des outils (fonctions) réalisant des actions ou récupérant des informations
- Accéder à des ressources fournissant du contexte ou des données

## Utilisation

### Générer un serveur MCP

Vous pouvez générer un serveur MCP TypeScript de deux manières :

<RunGenerator generator="ts#mcp-server" />

:::tip
Utilisez d'abord le générateur <Link path="/guides/typescript-project">`ts#project`</Link> pour créer un projet auquel ajouter votre serveur MCP.
:::

### Options

<GeneratorParameters generator="ts#mcp-server" />

## Résultat du générateur

Le générateur ajoutera les fichiers suivants à votre projet TypeScript existant :

<FileTree>
  - your-project/
    - src/
      - mcp-server/ (ou nom personnalisé si spécifié)
        - index.ts Point d'entrée du serveur MCP
        - server.ts Définition principale du serveur
        - tools/
          - add.ts Exemple d'outil
        - resources/
          - sample-guidance.ts Exemple de ressource
    - package.json Mis à jour avec l'entrée bin et les dépendances MCP
    - project.json Mis à jour avec la cible de service du serveur MCP
</FileTree>

## Utiliser votre serveur MCP

### Ajouter des outils

Les outils sont des fonctions que l'assistant IA peut appeler pour effectuer des actions. Vous pouvez ajouter de nouveaux outils dans le fichier `server.ts` :

```typescript
server.tool("toolName", "tool description",
  { param1: z.string(), param2: z.number() }, // Schéma d'entrée utilisant Zod
  async ({ param1, param2 }) => {
    // Implémentation de l'outil
    return {
      content: [{ type: "text", text: "Result" }]
    };
  }
);
```

### Ajouter des ressources

Les ressources fournissent du contexte à l'assistant IA. Vous pouvez ajouter des ressources statiques depuis des fichiers ou des ressources dynamiques :

```typescript
const exampleContext = 'some context to return';

server.resource('resource-name', 'example://resource', async (uri) => ({
  contents: [{ uri: uri.href, text: exampleContext }],
}));

// Ressource dynamique
server.resource('dynamic-resource', 'dynamic://resource', async (uri) => {
  const data = await fetchSomeData();
  return {
    contents: [{ uri: uri.href, text: data }],
  };
});
```

## Configuration avec les assistants IA

### Fichiers de configuration

La plupart des assistants IA supportant MCP utilisent une approche de configuration similaire. Vous devrez créer ou mettre à jour un fichier de configuration avec les détails de votre serveur MCP :

```json
{
  "mcpServers": {
    "your-mcp-server": {
      "command": "npx",
      "args": ["tsx", "/path/to/your-mcp-server/index.ts"]
    }
  }
}
```

:::caution
Si vous recevez une erreur comme `ENOENT npx` lors de la connexion à votre serveur, vous devrez peut-être spécifier le chemin complet vers `npx`, que vous pouvez obtenir en exécutant `which npx` dans votre terminal.
:::

### Rechargement à chaud

Pendant le développement de votre serveur MCP, vous pouvez activer le flag `--watch` pour que l'assistant IA voit toujours les dernières versions des outils/ressources :

```json {5}
{
  "mcpServers": {
    "your-mcp-server": {
      "command": "npx",
      "args": ["tsx", "--watch", "/path/to/your-mcp-server/index.ts"]
    }
  }
}
```

:::note
Si vous ajoutez de nouveaux outils ou ressources, vous devrez peut-être rafraîchir votre serveur MCP dans l'assistant IA.
:::

### Configuration spécifique aux assistants

Consultez la documentation suivante pour configurer MCP avec des assistants IA spécifiques :

<Snippet name="mcp/assistant-docs" />

:::tip
Certains assistants IA, comme Amazon Q Developer, permettent de spécifier une configuration MCP au niveau de l'espace de travail, particulièrement utile pour définir les serveurs MCP pertinents pour un projet donné.
:::

## Exécuter votre serveur MCP

La manière la plus simple de tester et utiliser un serveur MCP est de le configurer avec un assistant IA (comme ci-dessus). Vous pouvez cependant exécuter le serveur en utilisant la cible `<your-server-name>-serve`, utile si vous passez du [transport STDIO](https://modelcontextprotocol.io/docs/concepts/transports#standard-input%2Foutput-stdio) au [transport HTTP Streamable](https://modelcontextprotocol.io/docs/concepts/transports#streamable-http).

<NxCommands commands={['run your-project:your-server-name-serve']} />

Cette commande utilise `tsx --watch` pour redémarrer automatiquement le serveur lors des modifications de fichiers.