---
title: "Jogo de Dungeons com IA"
description: "Um guia passo a passo de como construir um jogo de aventura de dungeon com IA usando o @aws/nx-plugin."
---



import { Aside, Code, FileTree, Steps, Tabs, TabItem } from '@astrojs/starlight/components';
import { Image } from 'astro:assets';
import Drawer from '@components/drawer.astro';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import InstallCommand from '@components/install-command.astro';
import E2ECode from '@components/e2e-code.astro';
import E2EDiff from '@components/e2e-diff.astro';

import dungeonAdventureArchitecturePng from '@assets/dungeon-game-architecture.png'
import dungeonAdventureErPng from '@assets/dungeon-adventure-er.png'
import baselineWebsitePng from '@assets/baseline-website.png'
import baselineGamePng from '@assets/baseline-game.png'
import nxGraphPng from '@assets/nx-graph.png'
import gameSelectPng from '@assets/game-select.png'
import gameConversationPng from '@assets/game-conversation.png'

## M√≥dulo 4: Implementa√ß√£o da UI

Para come√ßar a construir a UI, precisamos configurar nosso servidor de desenvolvimento local para apontar para o sandbox implantado. Execute o comando:

<NxCommands commands={["run @dungeon-adventure/game-ui:load:runtime-config"]} />

Este comando ir√° baixar o `runtime-config.json` implantado e armazen√°-lo localmente na pasta `packages/game-ui/public`.

Agora podemos iniciar o servidor de desenvolvimento com:

<NxCommands commands={["run @dungeon-adventure/game-ui:serve"]} />

Voc√™ pode ent√£o abrir o site local no navegador, onde ser√° solicitado login e a cria√ß√£o de um novo usu√°rio. Ap√≥s concluir, voc√™ ver√° o site base:

<Image src={baselineWebsitePng} alt="baseline-website.png" width="800" height="600" />

<Aside type="caution">
_Mantenha o servidor de desenvolvimento rodando durante este m√≥dulo, pois ele recarregar√° automaticamente as altera√ß√µes._
</Aside>

### Criar nova rota '/game'

Vamos demonstrar as capacidades do `@tanstack/react-router` criando uma rota tipada. Crie um arquivo em `packages/game-ui/src/routes/game/index.tsx` e observe os logs:

```bash
‚ôªÔ∏è  Regenerando rotas...
üü° Atualizando /Users/dimecha/dungeon-adventure/packages/game-ui/src/routes/game/index.tsx
üü° Atualizando /Users/dimecha/dungeon-adventure/packages/game-ui/src/routeTree.gen.ts
‚úÖ Rotas processadas em 27ms
```

O router j√° configurou automaticamente sua nova rota:

```tsx
import { createFileRoute } from '@tanstack/react-router'

export const Route = createFileRoute('/game/')({
  component: RouteComponent,
})

function RouteComponent() {
  return <div>Hello "/game/"!</div>
}
```

Acesse `http://localhost:4200/game` para ver a nova p√°gina!

<Image src={baselineGamePng} alt="baseline-game.png" width="800" height="600" />

Atualize o `index.tsx` para carregar a rota `/game` por padr√£o. Observe a listagem de rotas tipadas ao editar o campo `to`:

<E2EDiff before="dungeon-adventure/4/routes/index.tsx.old.template" after="dungeon-adventure/4/routes/index.tsx.template" lang="tsx" />

Exclua a pasta `packages/game-ui/src/routes/welcome/` pois n√£o ser√° mais usada.

### Atualiza√ß√µes de layout

O layout padr√£o √© mais adequado para aplica√ß√µes SaaS. Vamos reconfigur√°-lo para um tema de dungeon:

<Tabs>
<TabItem label="config.ts">
<E2EDiff before="dungeon-adventure/4/config.ts.old.template" after="dungeon-adventure/4/config.ts.template" lang="typescript" />
</TabItem>
<TabItem label="components/AppLayout/index.tsx">
<E2ECode path="dungeon-adventure/4/AppLayout/index.tsx.template" lang="tsx" />
</TabItem>
<TabItem label="styles.css">
<E2ECode path="dungeon-adventure/4/styles.css.template" lang="css" />
</TabItem>
</Tabs>

Exclua os arquivos `navitems.ts` e `useAppLayout.tsx` que n√£o s√£o mais usados.

### P√°ginas do jogo

Vamos criar as p√°ginas do jogo que consumir√£o nossas APIs:

<Tabs>
<TabItem label="index.tsx">
<E2ECode path="dungeon-adventure/4/routes/game/index.tsx.template" lang="tsx" />
</TabItem>
<TabItem label="$playerName.tsx">

<E2ECode path="dungeon-adventure/4/routes/game/$playerName.tsx.template" lang="tsx" />

<Aside type="tip">
A sintaxe `$playerName` define um [par√¢metro de caminho](https://tanstack.com/router/v1/docs/framework/react/guide/path-params). O m√©todo `validateSearch` garante tipagem forte para o par√¢metro `genre`.
</Aside>
</TabItem>
</Tabs>

Ap√≥s essas altera√ß√µes, seu jogo estar√° pronto em http://localhost:4200/!

<Drawer title="Build e Deploy" trigger="Voc√™ tamb√©m pode construir e implantar no Cloudfront">

Para construir:

<NxCommands commands={['run-many --target build --all']} />

Para implantar:

<NxCommands commands={['run @dungeon-adventure/infra:deploy dungeon-adventure-infra-sandbox']} />

Acesse a URL do Cloudfront nos outputs do CDK ap√≥s deploy.

</Drawer>

<Image src={gameSelectPng} alt="game-select.png" width="500" height="400" />
<div style="margin-top: -100px; margin-left: 100px;">
<Image src={gameConversationPng} alt="game-conversation.png" width="500" height="400" />
</div>

Parab√©ns. Voc√™ construiu e implantou seu Dungeon Adventure Game! üéâüéâüéâ