---
title: "TypeScript Nx Plugin"
description: "Tạo Nx Plugin của riêng bạn! Xây dựng các generator tùy chỉnh tự động được cung cấp cho AI vibe-coding thông qua MCP"
---

import { FileTree } from '@astrojs/starlight/components';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import GeneratorParameters from '@components/generator-parameters.astro';
import Link from '@components/link.astro';
import Snippet from '@components/snippet.astro';
import InstallCommand from '@components/install-command.astro';

Tạo một [Nx Plugin](https://nx.dev/extending-nx/intro/getting-started) TypeScript hoàn chỉnh với máy chủ [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) tích hợp. Generator này tạo nền tảng để xây dựng các generator tùy chỉnh có thể được sử dụng liền mạch bởi các trợ lý AI để tự động tạo mã và khởi tạo dự án.

## Cách sử dụng

### Tạo một Nx Plugin

Bạn có thể tạo một Nx Plugin TypeScript theo hai cách:

<RunGenerator generator="ts#nx-plugin" />

### Tùy chọn

<GeneratorParameters generator="ts#nx-plugin" />

## Kết quả của Generator

Generator sẽ tạo cấu trúc dự án như sau:

<FileTree>
- your-plugin/
  - src/
    - index.ts Điểm vào rỗng cho plugin của bạn
    - mcp-server/
      - index.ts Xuất máy chủ của bạn
      - server.ts Cấu hình máy chủ MCP chính
      - stdio.ts Điểm vào cho máy chủ MCP của bạn với giao thức STDIO
      - http.ts Điểm vào cho máy chủ MCP của bạn với giao thức Streamable HTTP
      - tools/
        - create-workspace-command.ts Công cụ hướng dẫn tạo workspace
        - general-guidance.ts Công cụ hướng dẫn chung về Nx và plugin
        - list-generators.ts Công cụ liệt kê các generator có sẵn
        - generator-guide.ts Công cụ cung cấp thông tin chi tiết về generator
      - utils.ts Các hàm tiện ích cho máy chủ MCP
  - generators.json Cấu hình generator Nx (ban đầu trống)
  - package.json Cấu hình package plugin với binary máy chủ MCP
  - tsconfig.json Cấu hình TypeScript (CommonJS để tương thích với Nx)
  - project.json Cấu hình dự án Nx với các target build và package
</FileTree>

## Làm việc với Nx Plugin của bạn

### Thêm Generator

Sau khi có dự án plugin, bạn có thể thêm các generator bằng cách sử dụng generator <Link path="/guides/ts-nx-generator">`ts#nx-generator`</Link>:

<RunGenerator generator="ts#nx-generator" requiredParameters={{ pluginProject: 'your-plugin' }} />

Điều này sẽ thêm một generator mới vào plugin của bạn.

:::tip
Đọc <Link path="/guides/ts-nx-generator">hướng dẫn `ts#nx-generator`</Link> để biết chi tiết về cách triển khai các generator.
:::

Hãy đảm bảo viết một file `README.md` chi tiết cho generator của bạn, vì nó được sử dụng bởi công cụ `generator-guide` của MCP Server.

### Các Target của Dự án

Plugin được tạo bao gồm một số target quan trọng:

#### Target Build
Biên dịch mã TypeScript của bạn và chuẩn bị plugin để sử dụng:

<NxCommands commands={['build your-plugin']} />

#### Target Package
Tạo một package có thể phân phối, sẵn sàng để xuất bản lên NPM:

<NxCommands commands={['package your-plugin']} />

Target package bao gồm tất cả các tài nguyên cần thiết:
- Các file JavaScript đã biên dịch
- Các file khai báo TypeScript
- Các file cấu hình generator và executor
- Các file tài liệu và giấy phép

## Tích hợp MCP Server

Plugin cấu hình một máy chủ MCP bằng cách sử dụng generator <Link path="/guides/ts-mcp-server">`ts#mcp-server`</Link>.

### Công cụ

Plugin bao gồm một máy chủ MCP hoàn chỉnh cung cấp cho các trợ lý AI các công cụ sau:

- `general-guidance`: Nhận các phương pháp tốt nhất để làm việc với Nx và plugin của bạn
- `create-workspace-command`: Tìm hiểu cách tạo workspace mới có thể sử dụng plugin của bạn
- `list-generators`: Liệt kê tất cả các generator có sẵn trong plugin của bạn
- `generator-guide`: Nhận thông tin chi tiết về các generator cụ thể bao gồm schema và cách sử dụng

### Cấu hình với Trợ lý AI

<Snippet name="mcp/configuration-ts" parentHeading="Cấu hình với Trợ lý AI" />

### Tùy chỉnh MCP Server

Bạn có thể mở rộng máy chủ MCP bằng cách sửa đổi `server.ts` để thêm các công cụ hoặc tài nguyên bổ sung cụ thể cho lĩnh vực của plugin bạn.

Để biết thêm chi tiết về việc viết MCP Server, tham khảo <Link path="/guides/ts-mcp-server">hướng dẫn `ts#mcp-server`</Link>.

## Xuất bản Plugin của bạn

### Chuẩn bị để Xuất bản

1. **Cập nhật Thông tin Package**: Chỉnh sửa [`package.json`](https://docs.npmjs.com/cli/v10/configuring-npm/package-json) của plugin với tên, phiên bản, mô tả và thông tin repository phù hợp.

2. **Build Package**:
   <NxCommands commands={['package your-plugin']} />

3. **Kiểm tra Cục bộ**: Bạn có thể kiểm tra plugin của mình cục bộ bằng cách cài đặt nó trong một workspace khác:
   ```bash
   npm install /path/to/your/workspace/dist/your-plugin/package
   ```

### Xuất bản lên NPM

Khi plugin của bạn đã sẵn sàng:

```bash
cd dist/your-plugin/package
npm publish
```

### Sử dụng Plugin đã Xuất bản

Sau khi xuất bản, người khác có thể cài đặt và sử dụng plugin của bạn:

<InstallCommand pkg="your-plugin-name" />

Sau đó sử dụng các generator của bạn:

<RunGenerator namespace="your-plugin-name" generator="your-generator-name" />

#### Cấu hình Trợ lý AI với Plugin đã Xuất bản của bạn

Máy chủ MCP của plugin đã xuất bản có thể được cấu hình như sau:

```json {3-6}
{
  "mcpServers": {
    "aws-nx-mcp": {
      "command": "npx",
      "args": ["-y", "-p", "your-plugin-name", "your-plugin-name-mcp-server"]
    }
  }
}
```