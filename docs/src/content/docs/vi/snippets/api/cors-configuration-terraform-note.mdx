---
title: "Cấu hình CORS với Terraform"
---

import Link from '@components/link.astro';

:::note
Nếu giải pháp của bạn bao gồm một module website Terraform thì bạn có thể sử dụng tên miền CloudFront của nó để hạn chế CORS.
Với tên miền CloudFront `<domain_name>`, trong module Terraform để triển khai API của bạn, hãy thêm
- một thuộc tính `cors_allow_origins`, đặt thành `["http://localhost:4200", "http://localhost:4300", "https://<domain name>"]`, cho HTTP APIs. Điều này hạn chế CORS của API gateway đối với phân phối này và local host.
- một biến môi trường `ALLOWED_ORIGINS`, đặt thành `"https://<domain_name>"`, cho REST APIs. Điều này đặt phân phối CloudFront là nguồn gốc CORS duy nhất được phép (ngoài local host) trong các tích hợp AWS Lambda. Lưu ý rằng hạn chế này không được áp dụng cho preflight OPTIONS - vui lòng +1 [GitHub issue này](https://github.com/awslabs/nx-plugin-for-aws/issues/377) để giúp ưu tiên giải quyết vấn đề này.

```hcl {4,7}
module "my_api" {
  source = "../../common/terraform/src/app/apis/my-api"

  cors_allow_origins = ["http://localhost:4200", "http://localhost:4300", "https://<domain name>"] // Only required for HTTP API

  env = {
    ALLOWED_ORIGINS = "https://<domain name>" // Only required for REST API
    ENVIRONMENT = var.environment
    LOG_LEVEL   = "INFO"
  }
}
```
Cấu trúc `MyWebsite` có thể được tạo bằng cách sử dụng <Link path="/guides/react-website">trình tạo `ts#react-website`</Link>
:::