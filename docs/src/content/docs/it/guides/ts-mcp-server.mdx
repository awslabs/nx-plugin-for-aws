---
title: "Server MCP TypeScript"
description: "Genera un server Model Context Protocol (MCP) TypeScript per fornire contesto ai modelli di linguaggio di grandi dimensioni"
---



import { FileTree } from '@astrojs/starlight/components';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import Link from '@components/link.astro';
import Snippet from '@components/snippet.astro';
import GeneratorParameters from '@components/generator-parameters.astro';

Genera un server [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) in TypeScript per fornire contesto ai Large Language Model (LLM).

## Cos’è l’MCP?

Il [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) è uno standard aperto che permette agli assistenti AI di interagire con strumenti e risorse esterne. Fornisce un metodo consistente per consentire agli LLM di:

- Eseguire strumenti (funzioni) che compiono azioni o recuperano informazioni
- Accedere a risorse che forniscono contesto o dati

## Utilizzo

### Generare un server MCP

Puoi generare un server MCP in TypeScript in due modi:

<RunGenerator generator="ts#mcp-server" />

:::tip
Prima utilizza il generatore <Link path="/guides/typescript-project">`ts#project`</Link> per creare un progetto a cui aggiungere il tuo server MCP.
:::

### Opzioni

<GeneratorParameters generator="ts#mcp-server" />

## Output del generatore

Il generatore aggiungerà i seguenti file al tuo progetto TypeScript esistente:

<FileTree>
  - your-project/
    - src/
      - mcp-server/ (o nome personalizzato se specificato)
        - index.ts Punto di ingresso del server MCP
        - server.ts Definizione principale del server
        - tools/
          - add.ts Strumento di esempio
        - resources/
          - sample-guidance.ts Risorsa di esempio
    - package.json Aggiornato con la voce bin e le dipendenze MCP
    - project.json Aggiornato con il target serve del server MCP
</FileTree>

## Lavorare con il server MCP

### Aggiungere strumenti

Gli strumenti sono funzioni che l'assistente AI può chiamare per eseguire azioni. Puoi aggiungere nuovi strumenti nel file `server.ts`:

```typescript
server.tool("toolName", "tool description",
  { param1: z.string(), param2: z.number() }, // Schema di input usando Zod
  async ({ param1, param2 }) => {
    // Implementazione dello strumento
    return {
      content: [{ type: "text", text: "Result" }]
    };
  }
);
```

### Aggiungere risorse

Le risorse forniscono contesto all'assistente AI. Puoi aggiungere risorse statiche da file o risorse dinamiche:

```typescript
const exampleContext = 'some context to return';

server.resource('resource-name', 'example://resource', async (uri) => ({
  contents: [{ uri: uri.href, text: exampleContext }],
}));

// Risorsa dinamica
server.resource('dynamic-resource', 'dynamic://resource', async (uri) => {
  const data = await fetchSomeData();
  return {
    contents: [{ uri: uri.href, text: data }],
  };
});
```

## Configurazione con assistenti AI

### File di configurazione

La maggior parte degli assistenti AI che supportano MCP utilizza un approccio di configurazione simile. Dovrai creare o aggiornare un file di configurazione con i dettagli del tuo server MCP:

```json
{
  "mcpServers": {
    "your-mcp-server": {
      "command": "npx",
      "args": ["tsx", "/path/to/your-mcp-server/index.ts"]
    }
  }
}
```

:::caution
Se ricevi un errore come `ENOENT npx` durante la connessione al server, potrebbe essere necessario specificare il percorso completo di `npx`, ottenibile eseguendo `which npx` nel terminale.
:::

### Hot Reload

Durante lo sviluppo del server MCP, puoi configurare il flag `--watch` per far sì che l'assistente AI veda sempre le versioni più recenti di strumenti/risorse:

```json {5}
{
  "mcpServers": {
    "your-mcp-server": {
      "command": "npx",
      "args": ["tsx", "--watch", "/path/to/your-mcp-server/index.ts"]
    }
  }
}
```

:::note
Se aggiungi nuovi strumenti o risorse, potrebbe essere necessario aggiornare il server MCP nell'assistente AI.
:::

### Configurazione specifica per assistente

Consulta la seguente documentazione per configurare MCP con assistenti AI specifici:

<Snippet name="mcp/assistant-docs" />

:::tip
Alcuni assistenti AI, come Amazon Q Developer, permettono di specificare configurazioni MCP a livello di workspace, particolarmente utili per definire i server MCP rilevanti per un progetto specifico.
:::

## Esecuzione del server MCP

Il modo più semplice per testare e utilizzare un server MCP è configurarlo con un assistente AI (come sopra). Tuttavia, puoi eseguire il server usando il target `<your-server-name>-serve`, utile se passi dal [trasporto STDIO](https://modelcontextprotocol.io/docs/concepts/transports#standard-input%2Foutput-stdio) al [trasporto HTTP streamable](https://modelcontextprotocol.io/docs/concepts/transports#streamable-http).

<NxCommands commands={['run your-project:your-server-name-serve']} />

Questo comando utilizza `tsx --watch` per riavviare automaticamente il server quando i file cambiano.