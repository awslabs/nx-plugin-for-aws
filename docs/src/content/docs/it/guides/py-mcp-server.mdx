---
title: "Server MCP Python"
description: "Genera un server del Protocollo di Contesto del Modello (MCP) Python per fornire contesto ai Modelli di Linguaggio di Grandi Dimensioni"
---



import { FileTree } from '@astrojs/starlight/components';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import Link from '@components/link.astro';
import Snippet from '@components/snippet.astro';
import GeneratorParameters from '@components/generator-parameters.astro';

Genera un server Python per il [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) per fornire contesto ai Large Language Model (LLM), con opzione di deploy su [Amazon Bedrock AgentCore](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/).

## Cos'è l'MCP?

Il [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) è uno standard aperto che permette agli assistenti AI di interagire con strumenti e risorse esterne. Fornisce un modo consistente per gli LLM di:

- Eseguire strumenti (funzioni) che compiono azioni o recuperano informazioni  
- Accedere a risorse che forniscono contesto o dati

## Utilizzo

### Generare un server MCP

Puoi generare un server MCP Python in due modi:

<RunGenerator generator="py#mcp-server" />

:::tip
Prima utilizza il generatore <Link path="/guides/python-project">`py#project`</Link> per creare un progetto a cui aggiungere il tuo server MCP.
:::

### Opzioni

<GeneratorParameters generator="py#mcp-server" />

## Output del Generatore

Il generatore aggiungerà questi file al tuo progetto Python esistente:

<FileTree>
  - your-project/
    - your_module/
      - mcp_server/ (o nome personalizzato se specificato)
        - \_\_init\_\_.py Inizializzazione pacchetto Python
        - server.py Definizione principale del server con strumenti e risorse di esempio
        - stdio.py Punto d'ingresso per trasporto STDIO, utile per server MCP locali semplici
        - http.py Punto d'ingresso per trasporto HTTP streamable, utile per hosting del server MCP
        - Dockerfile Punto d'ingresso per hosting del server MCP (quando `computeType` è impostato a `BedrockAgentCoreRuntime`)
    - pyproject.toml Aggiornato con dipendenze MCP
    - project.json Aggiornato con target di servizio del server MCP
</FileTree>

:::note
Se hai selezionato `BedrockAgentCoreRuntime` per `computeType`, il generatore creerà anche un costrutto CDK per deployare il tuo server MCP.
:::

## Lavorare con il Server MCP

### Aggiungere Strumenti

Gli strumenti sono funzioni che l'assistente AI può chiamare per compiere azioni. Il server MCP Python utilizza la libreria [MCP Python SDK (FastMCP)](https://github.com/modelcontextprotocol/python-sdk), che fornisce un approccio basato su decoratori per definire strumenti.

Puoi aggiungere nuovi strumenti nel file `server.py`:

```python
@mcp.tool(description="Descrizione del tuo strumento")
def your_tool_name(param1: str, param2: int) -> str:
    """Implementazione dello strumento con type hints"""
    # Logica dello strumento qui
    return f"Risultato: {param1} con {param2}"
```

La libreria FastMCP gestisce automaticamente:
- Validazione dei tipi basata sui type hints della funzione
- Generazione dello schema JSON per il protocollo MCP
- Gestione errori e formattazione risposte

### Aggiungere Risorse

Le risorse forniscono contesto all'assistente AI. Puoi aggiungerle usando il decoratore `@mcp.resource`:

```python
@mcp.resource("example://static-resource", description="Esempio risorsa statica")
def static_resource() -> str:
    """Restituisce contenuto statico"""
    return "Questo è contenuto statico che fornisce contesto all'AI"

@mcp.resource("dynamic://resource/{item_id}", description="Esempio risorsa dinamica")
def dynamic_resource(item_id: str) -> str:
    """Restituisce contenuto dinamico basato su parametri"""
    # Recupera dati basati su item_id
    data = fetch_data_for_item(item_id)
    return f"Contenuto dinamico per {item_id}: {data}"
```

## Configurazione con Assistanti AI

<Snippet name="mcp/configuration-py" parentHeading="Configurazione con Assistanti AI" />

## Esecuzione del Server MCP

### STDIO

Il modo più semplice per testare e usare un server MCP è configurarlo con un assistente AI (come sopra).

Puoi comunque eseguire il server con [trasporto STDIO](https://modelcontextprotocol.io/docs/concepts/transports#standard-input%2Foutput-stdio) direttamente usando il target `<your-server-name>-serve-stdio`.

<NxCommands commands={['run your-project:your-server-name-serve-stdio']} />

Questo comando usa `uv run` per eseguire il server MCP con trasporto STDIO.

### HTTP Streamable

Se vuoi eseguire il server MCP localmente usando [trasporto HTTP streamable](https://modelcontextprotocol.io/docs/concepts/transports#streamable-http), puoi usare il target `<your-server-name>-serve-http`.

<NxCommands commands={['run your-project:your-server-name-serve-http']} />

Questo comando usa `uv run` per eseguire il server MCP con trasporto HTTP, tipicamente sulla porta 8000.

## Deploy del Server MCP su Bedrock AgentCore Runtime

<Snippet name="mcp/bedrock-deployment" parentHeading="Deploy del Server MCP su Bedrock AgentCore Runtime" />

### Target Bundle e Docker

Per costruire il tuo server MCP per Bedrock AgentCore Runtime, viene aggiunto un target `bundle` al progetto, che:

- Esporta le dipendenze Python in un file `requirements.txt` usando `uv export`
- Installa le dipendenze per la piattaforma target (`aarch64-manylinux2014`) usando `uv pip install`

Viene anche aggiunto un target `docker` specifico per il server MCP, che:

- Costruisce un'immagine docker dal `Dockerfile` che esegue il server MCP sulla porta `8000`, secondo il [contratto di protocollo MCP](https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/runtime-service-contract.html#mcp-protocol-contract)

:::tip
L'immagine docker è costruita usando un tag (esempio `my-scope-my-project-mcp-server:latest`), da cui eredita il `Dockerfile` del costrutto CDK, permettendo al tuo `Dockerfile` di essere collocato insieme al progetto del server MCP.
:::

### Osservabilità

<Snippet name="mcp/observability" parentHeading="Osservabilità" />