---
title: "Gioco di Dungeon con IA"
description: "Una guida dettagliata su come costruire un gioco di avventura dungeon alimentato da IA utilizzando il plugin @aws/nx-plugin."
---



import { Aside, Code, FileTree, Steps, Tabs, TabItem } from '@astrojs/starlight/components';
import { Image } from 'astro:assets';
import Drawer from '@components/drawer.astro';
import RunGenerator from '@components/run-generator.astro';
import NxCommands from '@components/nx-commands.astro';
import InstallCommand from '@components/install-command.astro';
import E2ECode from '@components/e2e-code.astro';
import E2EDiff from '@components/e2e-diff.astro';

import dungeonAdventureArchitecturePng from '@assets/dungeon-game-architecture.png'
import dungeonAdventureErPng from '@assets/dungeon-adventure-er.png'
import baselineWebsitePng from '@assets/baseline-website.png'
import baselineGamePng from '@assets/baseline-game.png'
import nxGraphPng from '@assets/nx-graph.png'
import gameSelectPng from '@assets/game-select.png'
import gameConversationPng from '@assets/game-conversation.png'

## Modulo 4: Implementazione dell'interfaccia utente

Per iniziare a costruire l'interfaccia utente, configuriamo il server di sviluppo locale per puntare alla sandbox distribuita. Esegui il seguente comando:

<NxCommands commands={["run @dungeon-adventure/game-ui:load:runtime-config"]} />

Questo comando scaricher√† il file `runtime-config.json` distribuito e lo memorizzer√† localmente nella cartella `packages/game-ui/public`.

Ora avvia il server di sviluppo con:

<NxCommands commands={["run @dungeon-adventure/game-ui:serve"]} />

Apri il sito locale nel browser e segui le istruzioni per accedere e creare un nuovo utente. Al termine vedrai il sito base:

<Image src={baselineWebsitePng} alt="baseline-website.png" width="800" height="600" />

<Aside type="caution">
_Mantieni il server di sviluppo in esecuzione durante questo modulo: ricaricher√† automaticamente le modifiche._
</Aside>

### Crea una nuova route '/game'

Mostriamo le capacit√† di `@tanstack/react-router` creando una route tipizzata. Crea un file vuoto in `packages/game-ui/src/routes/game/index.tsx`. Monitora i log del server:

```bash
‚ôªÔ∏è  Regenerating routes...
üü° Updating /Users/dimecha/dungeon-adventure/packages/game-ui/src/routes/game/index.tsx
üü° Updating /Users/dimecha/dungeon-adventure/packages/game-ui/src/routeTree.gen.ts
‚úÖ Processed routes in 27ms
```

Il router ha gi√† configurato automaticamente la nuova route. Nota che il file √® gi√† popolato con il percorso:

```tsx
import { createFileRoute } from '@tanstack/react-router'

export const Route = createFileRoute('/game/')({
  component: RouteComponent,
})

function RouteComponent() {
  return <div>Hello "/game/"!</div>
}
```

Accedendo a `http://localhost:4200/game` vedrai la nuova pagina!

<Image src={baselineGamePng} alt="baseline-game.png" width="800" height="600" />

Aggiorna `index.tsx` per caricare la route `/game` di default. Nota come il campo `to` offra suggerimenti tipizzati.

<E2EDiff before="dungeon-adventure/4/routes/index.tsx.old.template" after="dungeon-adventure/4/routes/index.tsx.template" lang="tsx" />

Elimina la cartella `packages/game-ui/src/routes/welcome/` non pi√π necessaria.

### Aggiornamenti al layout

Il layout predefinito √® pi√π adatto a un'app SaaS che a un gioco. Riconfiguriamolo con un tema dungeon.

Modifica questi file in `packages/game-ui/src`:

<Tabs>
<TabItem label="config.ts">
<E2EDiff before="dungeon-adventure/4/config.ts.old.template" after="dungeon-adventure/4/config.ts.template" lang="typescript" />
</TabItem>
<TabItem label="components/AppLayout/index.tsx">
<E2ECode path="dungeon-adventure/4/AppLayout/index.tsx.template" lang="tsx" />
</TabItem>
<TabItem label="styles.css">
<E2ECode path="dungeon-adventure/4/styles.css.template" lang="css" />
</TabItem>
</Tabs>

Elimina i file `packages/game-ui/src/components/AppLayout/navitems.ts` e `packages/game-ui/src/hooks/useAppLayout.tsx` non utilizzati.

### Pagine di gioco

Creiamo le pagine che richiameranno le API e completeranno il gioco:

<Tabs>
<TabItem label="index.tsx">
<E2ECode path="dungeon-adventure/4/routes/game/index.tsx.template" lang="tsx" />
</TabItem>
<TabItem label="$playerName.tsx">

<E2ECode path="dungeon-adventure/4/routes/game/$playerName.tsx.template" lang="tsx" />

<Aside type="tip">
La sintassi `$playerName` indica a `@tanstack/react-router` di trattare `playerName` come [parametro di percorso](https://tanstack.com/router/v1/docs/framework/react/guide/path-params). Il metodo `validateSearch` garantisce che il parametro `genre` sia tipizzato secondo l'enum.
</Aside>
</TabItem>
</Tabs>

Dopo queste modifiche, il gioco sar√† accessibile all'indirizzo http://localhost:4200/!

<Drawer title="Build e Deploy" trigger="Puoi anche compilare e distribuire il codice su Cloudfront.">

Per compilare:

<NxCommands commands={['run-many --target build --all']} />

Per distribuire:

<NxCommands commands={['run @dungeon-adventure/infra:deploy dungeon-adventure-infra-sandbox/*']} />

L'URL Cloudfront √® disponibile negli output del deploy CDK.

</Drawer>

<Image src={gameSelectPng} alt="game-select.png" width="500" height="400" />
<div style="margin-top: -100px; margin-left: 100px;">
<Image src={gameConversationPng} alt="game-conversation.png" width="500" height="400" />
</div>

Complimenti! Hai costruito e distribuito Dungeon Adventure Game! üéâüéâüéâ